(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{21292:(e,t,s)=>{Promise.resolve().then(s.bind(s,85463))},85463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eX});var a=s(86286);s(26692);var r=s(50654),n=s(27484),i=s(37942),l=s(71751),d=s(99426),c=s(4452),o=s(58074),m=s(33664),x=s(30334),u=s(23398),h=s(61498),g=s(27412);let p=0,j=new Map,f=e=>{if(j.has(e))return;let t=setTimeout(()=>{j.delete(e),N({type:"REMOVE_TOAST",toastId:e})},1e6);j.set(e,t)},v=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?f(s):e.toasts.forEach(e=>{f(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},y=[],b={toasts:[]};function N(e){b=v(b,e),y.forEach(e=>{e(b)})}function w(e){let{...t}=e,s=(p=(p+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>N({type:"DISMISS_TOAST",toastId:s});return N({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>N({type:"UPDATE_TOAST",toast:{...e,id:s}})}}let k=c.z.object({type:c.z.enum(["gelir","gider"],{required_error:"T\xfcr se\xe7in"}),amount:c.z.string().min(1,"Tutar zorunlu").refine(e=>!Number.isNaN(Number(e.replace(",",".")))&&Number(e.replace(",","."))>0,"Ge\xe7erli bir tutar girin"),description:c.z.string().min(2,"En az 2 karakter"),category:c.z.string().min(1,"Kategori zorunlu"),date:c.z.string().min(1,"Tarih zorunlu"),recur:c.z.boolean().optional()}),A=["Maaş","Serbest","Yatırım","Diğer"],D=["Yemek","Ulaşım","Fatura","Eğlence","Sağlık","Diğer"];function S(e){let{open:t,onOpenChange:s,onAdd:r,onUpdate:n,editing:l,defaultType:c="gelir"}=e,p=(0,o.mN)({resolver:(0,m.u)(k),defaultValues:l?{type:l.type,amount:String(l.amount||""),description:l.description||"",category:l.category||"",date:l.date||"",recur:!1}:{type:c,amount:"",description:"",category:"gelir"===c?A[0]:D[0],date:new Date().toISOString().slice(0,10),recur:!1}}),j=p.watch("type"),f="gelir"===j?A:D;return(0,a.jsx)(d.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(d.Cf,{children:[(0,a.jsx)(d.c7,{children:(0,a.jsx)(d.L3,{children:l?"İşlemi D\xfczenle":"Yeni İşlem"})}),(0,a.jsx)(g.lV,{...p,children:(0,a.jsxs)("form",{onSubmit:p.handleSubmit(e=>{var t;console.log("Submit values:",e);let a=Number(e.amount.replace(",",".")),i={id:null!==(t=null==l?void 0:l.id)&&void 0!==t?t:crypto.randomUUID(),type:e.type,amount:a,description:e.description.trim(),category:e.category,date:e.date};if(l&&n)n(i),w({title:"İşlem g\xfcncellendi",description:"Değişiklikler kaydedildi."});else{let t={...i};"gelir"===e.type&&e.recur&&(console.log("Adding recurring income flag"),t.__recurMonthly=!0),r(t),w({title:"İşlem eklendi",description:"".concat("gelir"===e.type?"Gelir":"Gider"," başarıyla kaydedildi.")})}s(!1),p.reset({type:c,amount:"",description:"",category:"gelir"===c?A[0]:D[0],date:new Date().toISOString().slice(0,10),recur:!1})}),className:"space-y-4",children:[(0,a.jsx)(g.zB,{control:p.control,name:"type",render:e=>{let{field:t}=e;return(0,a.jsxs)(g.eI,{children:[(0,a.jsx)(g.lR,{children:"T\xfcr"}),(0,a.jsxs)(h.l6,{value:t.value,onValueChange:t.onChange,children:[(0,a.jsx)(g.MJ,{children:(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{placeholder:"T\xfcr"})})}),(0,a.jsxs)(h.gC,{children:[(0,a.jsx)(h.eb,{value:"gelir",children:"Gelir"}),(0,a.jsx)(h.eb,{value:"gider",children:"Gider"})]})]}),(0,a.jsx)(g.C5,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(g.zB,{control:p.control,name:"amount",render:e=>{let{field:t}=e;return(0,a.jsxs)(g.eI,{children:[(0,a.jsx)(g.lR,{children:"Tutar (₺)"}),(0,a.jsx)(g.MJ,{children:(0,a.jsx)(x.p,{inputMode:"decimal",placeholder:"0",...t})}),(0,a.jsx)(g.C5,{})]})}}),(0,a.jsx)(g.zB,{control:p.control,name:"date",render:e=>{let{field:t}=e;return(0,a.jsxs)(g.eI,{children:[(0,a.jsx)(g.lR,{children:"Tarih"}),(0,a.jsx)(g.MJ,{children:(0,a.jsx)(x.p,{type:"date",...t})}),(0,a.jsx)(g.C5,{})]})}})]}),(0,a.jsx)(g.zB,{control:p.control,name:"category",render:e=>{let{field:t}=e;return(0,a.jsxs)(g.eI,{children:[(0,a.jsx)(g.lR,{children:"Kategori"}),(0,a.jsxs)(h.l6,{value:t.value,onValueChange:t.onChange,children:[(0,a.jsx)(g.MJ,{children:(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{placeholder:"Kategori"})})}),(0,a.jsx)(h.gC,{children:f.map(e=>(0,a.jsx)(h.eb,{value:e,children:e},e))})]}),(0,a.jsx)(g.Rr,{children:"gelir"===j?"Gelir kategorisi":"Gider kategorisi"}),(0,a.jsx)(g.C5,{})]})}}),(0,a.jsx)(g.zB,{control:p.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(g.eI,{children:[(0,a.jsx)(g.lR,{children:"A\xe7ıklama"}),(0,a.jsx)(g.MJ,{children:(0,a.jsx)(x.p,{placeholder:"A\xe7ıklama",...t})}),(0,a.jsx)(g.C5,{})]})}}),"gelir"===j&&(0,a.jsxs)("div",{className:"flex items-center justify-between border rounded-md px-3 py-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Aylık tekrar"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Her ay aynı g\xfcn otomatik gelir ekle"})]}),(0,a.jsx)(g.zB,{control:p.control,name:"recur",render:e=>{let{field:t}=e;return(0,a.jsx)(u.d,{checked:!!t.value,onCheckedChange:t.onChange})}})]}),(0,a.jsxs)(d.Es,{children:[(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>s(!1),children:"İptal"}),(0,a.jsx)(i.$,{type:"submit",children:"Kaydet"})]})]})})]})})}var E=s(21669),C=s(41188),T=s(18821),z=s(46638),M=s(2036),G=s(40127),O=s(38170),R=s(32017),I=s(92709),F=s(33285),K=s(38694),P=s(32132),B=s(16478);function $(e){let{transaction:t,onEdit:s,onDelete:d,className:c=""}=e,[o,m]=(0,r.useState)(0),[x,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onSwipeLeft:t,onSwipeRight:s,onSwipeUp:a,onSwipeDown:n,onTap:i,onDoubleTap:l,onLongPress:d,swipeThreshold:c=50,longPressDelay:o=500}=e,m=(0,r.useRef)(null),x=(0,r.useRef)(null),u=(0,r.useRef)(0);return{onTouchStart:e=>{let t=e.touches[0];m.current={x:t.clientX,y:t.clientY,time:Date.now()},d&&(x.current=setTimeout(()=>{d()},o))},onTouchMove:()=>{x.current&&(clearTimeout(x.current),x.current=null)},onTouchEnd:e=>{if(x.current&&(clearTimeout(x.current),x.current=null),!m.current)return;let r=e.changedTouches[0],d=r.clientX-m.current.x,o=r.clientY-m.current.y,h=Date.now()-m.current.time,g=Math.abs(d),p=Math.abs(o);if(Math.max(g,p)>c){g>p?d>0?null==s||s():null==t||t():o>0?null==n||n():null==a||a();return}if(h<300){let e=Date.now();e-u.current<300&&l?(l(),u.current=0):(null==i||i(),u.current=e)}m.current=null}}}({onSwipeLeft:()=>{x||(m(-160),u(!0))},onSwipeRight:()=>{x&&(m(0),u(!1))},onTap:()=>{x&&(m(0),u(!1))},swipeThreshold:20}),j=async()=>{g(!0),setTimeout(()=>{d(t)},300)};return(0,a.jsxs)("div",{className:"relative overflow-hidden ".concat(c),children:[(0,a.jsx)("div",{className:"absolute right-0 top-0 bottom-0 flex items-center bg-red-500/10 dark:bg-red-950/20",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-4",children:[(0,a.jsx)(i.$,{size:"sm",variant:"ghost",onClick:()=>{m(0),u(!1),s(t)},className:"h-8 w-8 p-0 text-blue-600 hover:bg-blue-100 dark:text-blue-400 dark:hover:bg-blue-950",children:(0,a.jsx)(K.A,{className:"h-4 w-4"})}),(0,a.jsx)(i.$,{size:"sm",variant:"ghost",onClick:j,className:"h-8 w-8 p-0 text-red-600 hover:bg-red-100 dark:text-red-400 dark:hover:bg-red-950",children:(0,a.jsx)(P.A,{className:"h-4 w-4"})})]})}),x&&(0,a.jsx)(i.$,{size:"sm",variant:"ghost",onClick:()=>{m(0),u(!1)},className:"absolute left-2 top-1/2 -translate-y-1/2 z-10 h-8 w-8 p-0 bg-background/80 backdrop-blur-sm border",children:(0,a.jsx)(B.A,{className:"h-4 w-4"})}),(0,a.jsx)(n.Zp,{className:"transition-all duration-300 ".concat(h?"opacity-0 scale-95":"opacity-100 scale-100"," ").concat(x?"shadow-lg":""),style:{transform:"translateX(".concat(o,"px)"),transition:0===o?"transform 0.3s ease-out":"none"},...p,children:(0,a.jsx)("div",{className:"p-3 sm:p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0 pr-2 sm:pr-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 sm:space-x-2 mb-1",children:[(0,a.jsx)(l.E,{variant:"gelir"===t.type?"default":"destructive",className:"text-[10px] sm:text-xs px-1 py-0.5",children:"gelir"===t.type?"Gelir":"Gider"}),(0,a.jsx)("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate max-w-20 sm:max-w-none",children:t.category})]}),(0,a.jsx)("h4",{className:"font-medium text-xs sm:text-sm truncate mb-1 leading-tight",children:t.description}),(0,a.jsx)("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:(0,T.gn)(t.date)})]}),(0,a.jsx)("div",{className:"text-right flex-shrink-0",children:(0,a.jsxs)("p",{className:"font-bold text-xs sm:text-sm leading-tight ".concat("gelir"===t.type?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["gelir"===t.type?"+":"-",(0,a.jsx)("span",{className:"block sm:inline",children:(0,T.tn)(Math.abs(t.amount))})]})})]})})})]})}var L=s(80859);function W(e){let{onRefresh:t,children:s,className:n=""}=e,{isRefreshing:i,pullDistance:l,elementRef:d,handlers:c}=function(e){let[t,s]=(0,r.useState)(!1),[a,n]=(0,r.useState)(0),i=(0,r.useRef)(0),l=(0,r.useRef)(null),d=async()=>{if(a>=100&&!t){s(!0);try{await e()}catch(e){console.error("Refresh failed:",e)}finally{s(!1)}}n(0),i.current=0};return{isRefreshing:t,pullDistance:a,elementRef:l,handlers:{onTouchStart:e=>{var t;(null===(t=l.current)||void 0===t?void 0:t.scrollTop)===0&&(i.current=e.touches[0].clientY)},onTouchMove:e=>{var s;if(0===i.current||t)return;let a=e.touches[0].clientY-i.current;a>0&&(null===(s=l.current)||void 0===s?void 0:s.scrollTop)===0&&(n(Math.min(a,150)),e.preventDefault())},onTouchEnd:d}}}(t),o=Math.min(l/100,1);return(0,a.jsxs)("div",{ref:d,className:"relative overflow-auto ".concat(n),...c,children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 z-50 flex items-center justify-center transition-all duration-200 ".concat(l>0?"opacity-100":"opacity-0 pointer-events-none"),style:{height:Math.min(l,120),transform:"translateY(".concat(l>100?0:l-100,"px)")},children:(0,a.jsx)("div",{className:"bg-background/90 backdrop-blur-sm border rounded-full p-3 shadow-lg",children:(0,a.jsx)(L.A,{className:"h-5 w-5 transition-all duration-200 ".concat(i?"animate-spin":""," ").concat(l>=100?"text-primary":"text-muted-foreground"),style:{transform:"rotate(".concat(180*o,"deg)"),opacity:o}})})}),(0,a.jsx)("div",{className:"transition-transform duration-200",style:{transform:"translateY(".concat(l>0?Math.min(.5*l,60):0,"px)")},children:s}),i&&(0,a.jsx)("div",{className:"absolute top-4 left-0 right-0 z-40 flex justify-center",children:(0,a.jsxs)("div",{className:"bg-primary text-primary-foreground px-4 py-2 rounded-full text-sm font-medium flex items-center space-x-2",children:[(0,a.jsx)(L.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{children:"Yenileniyor..."})]})})]})}var U=s(57416),Y=s(69413),_=s(50161),Z=s(48427);function H(e){let{onAddIncome:t,onAddExpense:s}=e,[n,l]=(0,r.useState)(!1),d=e=>{e(),l(!1)};return(0,a.jsxs)("div",{className:"fixed bottom-20 right-4 z-50 md:hidden",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-2 mb-2 transition-all duration-300 ".concat(n?"opacity-100 translate-y-0":"opacity-0 translate-y-6 pointer-events-none"),children:[(0,a.jsx)(i.$,{size:"lg",onClick:()=>d(t),className:"h-10 w-10 rounded-full bg-green-500 hover:bg-green-600 text-white shadow-lg",children:(0,a.jsx)(U.A,{className:"h-4 w-4"})}),(0,a.jsx)(i.$,{size:"lg",onClick:()=>d(s),className:"h-10 w-10 rounded-full bg-red-500 hover:bg-red-600 text-white shadow-lg",children:(0,a.jsx)(Y.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(i.$,{size:"lg",onClick:()=>{l(!n)},className:"h-12 w-12 rounded-full shadow-xl transition-all duration-300 ".concat(n?"bg-gray-500 hover:bg-gray-600 rotate-45":"bg-primary hover:bg-primary/90"),children:n?(0,a.jsx)(_.A,{className:"h-5 w-5"}):(0,a.jsx)(Z.A,{className:"h-5 w-5"})}),n&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm -z-10",onClick:()=>l(!1)})]})}var q=s(69313);let J=e=>{let{children:t,delay:s=0,duration:r=.3,className:n=""}=e;return(0,a.jsx)(q.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:r,delay:s,ease:[.16,1,.3,1]},className:n,children:t})},V=e=>{let{children:t,delay:s=0,className:r=""}=e;return(0,a.jsx)(q.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:s,ease:[.16,1,.3,1]},className:r,children:t})},Q=e=>{let{children:t,className:s="",whileHover:r={scale:1.01},whileTap:n={scale:.99}}=e;return(0,a.jsx)(q.P.div,{whileHover:r,whileTap:n,transition:{duration:.05},className:s,children:t})},X=e=>{let{children:t,staggerDelay:s=.1,className:r=""}=e;return(0,a.jsx)(q.P.div,{initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:s}}},className:r,children:t})},ee=e=>{let{children:t,className:s=""}=e;return(0,a.jsx)(q.P.div,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:[.16,1,.3,1]}}},className:s,children:t})};var et=s(39584),es=s(78014),ea=s(90004),er=s(173),en=s(77610),ei=s(4751),el=s(84640),ed=s(53863),ec=s(37867);function eo(){let[e,t]=(0,r.useState)(!1),[s,d]=(0,r.useState)(0),[c,o]=(0,r.useState)(null),[m,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),g="/downloads/costikfinans.apk",[p,j]=(0,r.useState)({isAndroid:!1,isIOS:!1,isMobile:!1,browserName:"Unknown"}),{toast:f}=(0,z.dj)();(0,r.useEffect)(()=>{let e=navigator.userAgent.toLowerCase(),t=/android/.test(e),s=/iphone|ipad|ipod/.test(e),a=/mobile|android|iphone|ipad|ipod/.test(e),r="Unknown";e.includes("chrome")?r="Chrome":e.includes("firefox")?r="Firefox":e.includes("safari")?r="Safari":e.includes("edge")&&(r="Edge"),j({isAndroid:t,isIOS:s,isMobile:a,browserName:r});let n=e=>{e.preventDefault(),o(e),x(!0)};return window.addEventListener("beforeinstallprompt",n),(async()=>{try{if((await fetch(g,{method:"HEAD",cache:"no-store"})).ok){h(!0);return}}catch(e){}try{let e=await fetch(g,{method:"GET",cache:"no-store"});h(e.ok)}catch(e){h(!1)}})(),window.matchMedia("(display-mode: standalone)").matches&&x(!1),()=>{window.removeEventListener("beforeinstallprompt",n)}},[]);let v=async()=>{if(!c){f({title:"Y\xfckleme Mevcut Değil",description:"Bu cihazda PWA y\xfcklemesi desteklenmiyor veya uygulama zaten y\xfckl\xfc.",variant:"destructive"});return}try{let e=await c.prompt();"accepted"===e.outcome&&(f({title:"Başarılı!",description:"CostikFinans başarıyla ana ekranınıza eklendi!"}),x(!1)),o(null)}catch(e){console.error("PWA install error:",e),f({title:"Y\xfckleme Hatası",description:"Uygulama y\xfcklenirken bir hata oluştu.",variant:"destructive"})}},y=async()=>{if(m&&c)return v();t(!0),d(0);try{if(u){let e=setInterval(()=>{d(t=>t>=90?(clearInterval(e),t):t+10*Math.random())},100),t=await fetch(g,{method:"GET",headers:{Accept:"application/vnd.android.package-archive"}});if(!t.ok)throw Error("APK bulunamadı");let s=await t.blob();clearInterval(e),d(100);let a=window.URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download="CostikFinans.apk",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a),f({title:"İndirme hazır",description:"APK dosyası indirildi."});return}let e="https://pwabuilder.com/?site=".concat(encodeURIComponent(window.location.origin));window.open(e,"_blank"),d(100),f({title:"PWA Builder a\xe7ıldı",description:"Android se\xe7eneğiyle APK oluşturun."})}catch(e){console.error("APK download error:",e),f({title:"İndirme Hatası",description:"APK indirilemedi. PWA kurulumunu deneyin.",variant:"destructive"})}finally{t(!1),setTimeout(()=>d(0),2e3)}};return(0,a.jsxs)(n.Zp,{className:"w-full max-w-md mx-auto shadow-lg border-2",children:[(0,a.jsxs)(n.aR,{className:"text-center pb-4",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)("div",{className:"p-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full",children:(0,a.jsx)(et.A,{className:"h-8 w-8 text-white"})})}),(0,a.jsx)(n.ZB,{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Mobil Uygulama İndir"}),(0,a.jsxs)(n.BT,{className:"text-base",children:["CostikFinans'ı ",p.isMobile?"telefonunuza":"cihazınıza"," y\xfckleyin ve her yerden erişin"]}),(0,a.jsxs)("div",{className:"flex justify-center gap-2 mt-2",children:[(0,a.jsx)(l.E,{variant:"outline",className:"text-xs",children:p.isAndroid?"\uD83E\uDD16 Android":p.isIOS?"\uD83C\uDF4E iOS":"\uD83D\uDCBB Desktop"}),(0,a.jsxs)(l.E,{variant:"outline",className:"text-xs",children:["\uD83C\uDF10 ",p.browserName]})]})]}),(0,a.jsxs)(n.Wu,{className:"space-y-6",children:[m&&(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-full",children:(0,a.jsx)(es.A,{className:"h-4 w-4 text-green-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-green-800",children:"\xd6nerilen Y\xf6ntem"}),(0,a.jsxs)("div",{className:"flex gap-1 mt-1",children:[(0,a.jsx)(l.E,{className:"bg-green-100 text-green-800 text-xs",children:"Anında"}),(0,a.jsx)(l.E,{className:"bg-green-100 text-green-800 text-xs",children:"G\xfcvenli"}),(0,a.jsx)(l.E,{className:"bg-green-100 text-green-800 text-xs",children:"Otomatik"})]})]})]}),(0,a.jsxs)(i.$,{onClick:v,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",size:"lg",children:[(0,a.jsx)(ea.A,{className:"h-4 w-4 mr-2"}),"Ana Ekrana Ekle (PWA)"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs text-green-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(er.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"3 saniyede kurulum"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(L.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Otomatik g\xfcncelleme"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(en.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"G\xfcvenli kurulum"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(es.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Hızlı performans"})]})]})]}),m&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ec.w,{}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("span",{className:"bg-background px-4 text-xs text-muted-foreground uppercase tracking-wider",children:"veya alternatif"})})]}),(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-full",children:(0,a.jsx)(ei.A,{className:"h-4 w-4 text-blue-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-blue-800",children:"Ger\xe7ek APK İndir"}),(0,a.jsxs)("div",{className:"flex gap-1 mt-1",children:[(0,a.jsx)(l.E,{variant:"outline",className:"text-xs border-blue-300 text-blue-700",children:"PWA Builder"}),p.isAndroid&&(0,a.jsx)(l.E,{variant:"outline",className:"text-xs border-blue-300 text-blue-700",children:"Android"})]})]})]}),(0,a.jsx)(i.$,{onClick:y,disabled:e,variant:"outline",className:"w-full border-blue-300 hover:bg-blue-100",size:"lg",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-current border-t-transparent rounded-full"}),"PWA Builder A\xe7ılıyor..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ei.A,{className:"h-4 w-4 mr-2"}),"PWA Builder ile APK Oluştur"]})}),e&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ed.k,{value:s,className:"h-2"}),(0,a.jsx)("p",{className:"text-xs text-center text-blue-600",children:"PWA Builder sitesi a\xe7ılıyor... L\xfctfen bekleyin"})]}),(0,a.jsx)("div",{className:"text-xs text-blue-700 space-y-1",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(el.A,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{children:"• PWA Builder sitesinde Android se\xe7eneğini se\xe7in"}),(0,a.jsx)("p",{children:"• Oluşturulan APK dosyasını indirin"}),(0,a.jsx)("p",{children:"• İmzalanmış, kuruluma hazır APK elde edin"})]})]})})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)(i.$,{variant:"ghost",className:"text-sm text-blue-600 hover:text-blue-800",onClick:()=>window.open("/yardim/kurulum","_blank"),children:[(0,a.jsx)(ei.A,{className:"h-4 w-4 mr-2"}),"Detaylı Kurulum Rehberi"]})}),!p.isAndroid&&!m&&(0,a.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(el.A,{className:"h-4 w-4 text-blue-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"text-xs text-blue-700",children:[(0,a.jsx)("p",{className:"font-medium",children:"Bilgi:"}),(0,a.jsx)("p",{children:p.isIOS?"iOS cihazlar i\xe7in PWA kurulumu Safari tarayıcısında mevcut.":"En iyi deneyim i\xe7in Chrome, Safari veya Edge tarayıcısı kullanın."})]})]})})]})]})}var em=s(49846),ex=s(61286),eu=s(9999),eh=s(62550);function eg(e){let{downloadUrl:t,appName:s="CostikFinans"}=e,[l,d]=(0,r.useState)(""),[c,o]=(0,r.useState)(!0),{toast:m}=(0,z.dj)();(0,r.useEffect)(()=>{x()},[t]);let x=async()=>{try{o(!0);let e="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=".concat(encodeURIComponent(t),"&format=png&bgcolor=FFFFFF&color=000000&margin=10");d(e)}catch(e){console.error("QR kod oluşturma hatası:",e),d("https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=".concat(encodeURIComponent(t),"&format=png&bgcolor=FFFFFF&color=000000&margin=10"))}finally{o(!1)}},u=async()=>{try{await navigator.clipboard.writeText(t),m({title:"Kopyalandı!",description:"İndirme linki panoya kopyalandı."})}catch(e){m({title:"Kopyalama Hatası",description:"Link kopyalanamadı. Manuel olarak kopyalayın.",variant:"destructive"})}};return(0,a.jsxs)(n.Zp,{className:"w-full max-w-sm mx-auto",children:[(0,a.jsxs)(n.aR,{className:"text-center pb-4",children:[(0,a.jsx)("div",{className:"flex justify-center mb-3",children:(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full",children:(0,a.jsx)(ex.A,{className:"h-6 w-6 text-white"})})}),(0,a.jsx)(n.ZB,{className:"text-lg font-bold",children:"QR Kod ile İndir"}),(0,a.jsx)(n.BT,{className:"text-sm",children:"Telefon kameranızla QR kodu tarayın"})]}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"p-4 bg-white rounded-xl border-2 border-gray-200 shadow-sm",children:c?(0,a.jsx)("div",{className:"w-48 h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):(0,a.jsx)("img",{src:l,alt:"".concat(s," QR Kod"),className:"w-48 h-48 rounded-lg",onError:()=>{d("https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=".concat(encodeURIComponent(t),"&choe=UTF-8"))}})})}),(0,a.jsx)("div",{className:"space-y-3 text-center",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(et.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Kamera uygulamanızı a\xe7ın"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(ex.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"QR kodu ekrana sığdırın"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(er.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"\xc7ıkan linke dokunun"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)(i.$,{onClick:u,variant:"outline",size:"sm",className:"text-xs",children:[(0,a.jsx)(eh.A,{className:"h-3 w-3 mr-1"}),"Linki Kopyala"]}),(0,a.jsxs)(i.$,{onClick:()=>{if(!l)return;let e=document.createElement("a");e.href=l,e.download="".concat(s,"-QR.png"),document.body.appendChild(e),e.click(),document.body.removeChild(e),m({title:"QR Kod İndirildi",description:"QR kod resmi indirildi."})},variant:"outline",size:"sm",className:"text-xs",disabled:!l||c,children:[(0,a.jsx)(eu.A,{className:"h-3 w-3 mr-1"}),"QR İndir"]})]}),(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Direkt Link:"}),(0,a.jsx)("p",{className:"text-xs text-blue-600 break-all font-mono",children:t})]})]})]})}function ep(e){let{isOpen:t,onClose:s}=e,[n,c]=(0,r.useState)(!1),[o,m]=(0,r.useState)(0),[x,u]=(0,r.useState)({isAndroid:!1,isIOS:!1,isMobile:!1,browserName:"Unknown"}),{toast:h}=(0,z.dj)();(0,r.useEffect)(()=>{let e=navigator.userAgent.toLowerCase(),t=/android/.test(e),s=/iphone|ipad|ipod/.test(e),a=/mobile|android|iphone|ipad|ipod/.test(e),r="Unknown";e.includes("chrome")?r="Chrome":e.includes("firefox")?r="Firefox":e.includes("safari")?r="Safari":e.includes("edge")&&(r="Edge"),u({isAndroid:t,isIOS:s,isMobile:a,browserName:r})},[]);let g=async()=>{c(!0),m(0);try{let e="/downloads/costikfinans.apk";try{if(!(await fetch(e,{method:"HEAD",cache:"no-store"})).ok)throw Error("APK bulunamadı (HEAD)")}catch(t){if(!(await fetch(e,{method:"GET",cache:"no-store"})).ok){let e="https://pwabuilder.com/?site=".concat(encodeURIComponent(window.location.origin));window.open(e,"_blank"),h({title:"PWA Builder a\xe7ıldı",description:"APK şu an mevcut değil. PWA Builder ile oluşturabilirsiniz."});return}}let t=setInterval(()=>{m(e=>e>=90?(clearInterval(t),e):e+15*Math.random())},200),a=await fetch("/downloads/costikfinans.apk",{headers:{Accept:"application/vnd.android.package-archive"}});if(!a.ok)throw Error("APK dosyası bulunamadı");let r=await a.blob();clearInterval(t),m(100);let n=window.URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download="CostikFinans.apk",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n),h({title:"İndirme Tamamlandı!",description:"APK dosyası indirildi. Kurulum i\xe7in dosyayı a\xe7ın."}),s()}catch(e){console.error("APK download error:",e),h({title:"İndirme Hatası",description:"APK indirilemedi. PWA kurulumunu deneyin veya PWA Builder ile APK oluşturun.",variant:"destructive"})}finally{c(!1),setTimeout(()=>m(0),2e3)}};return(0,a.jsx)(d.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(d.Cf,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(d.c7,{children:(0,a.jsxs)(d.L3,{className:"flex items-center gap-3",children:[(0,a.jsx)("img",{src:"/logo.svg",alt:"CostikFinans",className:"h-6 w-6"}),(0,a.jsx)("span",{children:"CostikFinans - Mobil Uygulama İndir"})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsx)(l.E,{variant:"outline",className:"text-xs",children:x.isAndroid?"\uD83E\uDD16 Android":x.isIOS?"\uD83C\uDF4E iOS":"\uD83D\uDCBB Desktop"}),(0,a.jsxs)(l.E,{variant:"outline",className:"text-xs",children:["\uD83C\uDF10 ",x.browserName]})]}),(0,a.jsxs)(em.tU,{defaultValue:"pwa",className:"w-full",children:[(0,a.jsxs)(em.j7,{className:"grid w-full grid-cols-3",children:[(0,a.jsxs)(em.Xi,{value:"pwa",className:"text-xs",children:[(0,a.jsx)(ea.A,{className:"h-3 w-3 mr-1"}),"PWA"]}),(0,a.jsxs)(em.Xi,{value:"qr",className:"text-xs",children:[(0,a.jsx)(ex.A,{className:"h-3 w-3 mr-1"}),"QR Kod"]}),(0,a.jsxs)(em.Xi,{value:"apk",className:"text-xs",children:[(0,a.jsx)(eu.A,{className:"h-3 w-3 mr-1"}),"APK"]})]}),(0,a.jsx)(em.av,{value:"pwa",className:"space-y-4",children:(0,a.jsxs)("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-full",children:(0,a.jsx)(es.A,{className:"h-4 w-4 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-green-800",children:"PWA Kurulumu"}),(0,a.jsx)(l.E,{className:"bg-green-100 text-green-800 text-xs ml-2",children:"\xd6nerilen"})]})]}),(0,a.jsxs)(i.$,{onClick:()=>{h({title:"PWA Kurulumu",description:"Chrome men\xfcs\xfcnden (⋮) 'Ana ekrana ekle' se\xe7eneğini kullanın."}),s()},className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 mb-3",size:"sm",children:[(0,a.jsx)(ea.A,{className:"h-4 w-4 mr-2"}),"Ana Ekrana Ekle"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-green-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(er.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"3 saniyede kurulum"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(L.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Otomatik g\xfcncelleme"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(en.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"G\xfcvenli"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(es.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Hızlı"})]})]}),(0,a.jsxs)("div",{className:"mt-4 p-3 bg-white/60 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-green-800 mb-2",children:"Nasıl Kurulur:"}),(0,a.jsx)("div",{className:"text-xs text-green-700 space-y-1",children:x.isIOS?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:'1. Safari\'de "Paylaş" butonuna basın'}),(0,a.jsx)("p",{children:'2. "Ana Ekrana Ekle" se\xe7eneğini se\xe7in'}),(0,a.jsx)("p",{children:'3. "Ekle" butonuna basın'})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"1. Chrome men\xfcs\xfcn\xfc (⋮) a\xe7ın"}),(0,a.jsx)("p",{children:'2. "Ana ekrana ekle" se\xe7eneğini se\xe7in'}),(0,a.jsx)("p",{children:'3. "Y\xfckle" butonuna basın'})]})})]})]})}),(0,a.jsx)(em.av,{value:"qr",className:"space-y-4",children:(0,a.jsx)(eg,{downloadUrl:"".concat(window.location.origin,"/downloads/costikfinans.apk"),appName:"CostikFinans"})}),(0,a.jsx)(em.av,{value:"apk",className:"space-y-4",children:(0,a.jsxs)("div",{className:"p-4 bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg border border-orange-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2 bg-orange-100 rounded-full",children:(0,a.jsx)(eu.A,{className:"h-4 w-4 text-orange-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-orange-800",children:"APK Dosyası"}),x.isAndroid&&(0,a.jsx)(l.E,{variant:"outline",className:"text-xs border-orange-300 text-orange-700 ml-2",children:"Android"})]})]}),(0,a.jsx)(i.$,{onClick:g,disabled:n,variant:"outline",className:"w-full border-orange-300 hover:bg-orange-100 mb-3",size:"sm",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-current border-t-transparent rounded-full"}),"İndiriliyor... ",Math.round(o),"%"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eu.A,{className:"h-4 w-4 mr-2"}),"APK İndir ",x.isAndroid?"":"(Android i\xe7in)"]})}),n&&(0,a.jsxs)("div",{className:"space-y-2 mb-3",children:[(0,a.jsx)(ed.k,{value:o,className:"h-2"}),(0,a.jsx)("p",{className:"text-xs text-center text-orange-600",children:"Dosya hazırlanıyor..."})]}),(0,a.jsx)("div",{className:"text-xs text-orange-700 space-y-1",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(el.A,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"• Bilinmeyen kaynaklardan y\xfcklemeyi etkinleştirin"}),(0,a.jsx)("p",{children:"• İndirilen APK dosyasını a\xe7ın ve y\xfckleyin"})]})]})}),(0,a.jsxs)("div",{className:"mt-4 p-3 bg-white/60 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-orange-800 mb-2",children:"Kurulum Adımları:"}),(0,a.jsxs)("div",{className:"text-xs text-orange-700 space-y-1",children:[(0,a.jsx)("p",{children:"1. Ayarlar → G\xfcvenlik → Bilinmeyen kaynaklar ✅"}),(0,a.jsx)("p",{children:"2. İndirilen APK dosyasını a\xe7ın"}),(0,a.jsx)("p",{children:'3. "Y\xfckle" butonuna basın'}),(0,a.jsx)("p",{children:'4. Kurulum tamamlandığında "A\xe7" butonuna basın'})]})]})]})})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)(i.$,{variant:"ghost",className:"text-sm text-blue-600 hover:text-blue-800",onClick:()=>{window.open("/yardim/kurulum","_blank"),s()},children:[(0,a.jsx)(ei.A,{className:"h-4 w-4 mr-2"}),"Detaylı Kurulum Rehberi"]})}),!x.isAndroid&&(0,a.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(el.A,{className:"h-4 w-4 text-blue-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"text-xs text-blue-700",children:[(0,a.jsx)("p",{className:"font-medium",children:"\uD83D\uDCA1 İpucu:"}),(0,a.jsx)("p",{children:x.isIOS?'iOS cihazlar i\xe7in PWA kurulumu Safari\'de "Paylaş > Ana Ekrana Ekle" ile yapılır.':"En iyi deneyim i\xe7in Chrome tarayıcısı kullanın ve PWA kurulumunu tercih edin."})]})]})})]})]})})}var ej=s(17348),ef=s(78320),ev=s(23409),ey=s(77774),eb=s(2664),eN=s(36938),ew=s(63418),ek=s(74216),eA=s(7800),eD=s(92686),eS=s(35195),eE=s(22359),eC=s(77857),eT=s(64314),ez=s(24749),eM=s(36883),eG=s(61145),eO=s(90839),eR=s(19790),eI=s(57385),eF=s(69948),eK=s(29995),eP=s(93722),eB=s(21041),e$=s(93130),eL=s(10553),eW=s(35137),eU=s(40732),eY=s(79357),e_=s(93745),eZ=s(75288),eH=s(88108),eq=s(10369),eJ=s(61081);let eV=["hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5))"],eQ=e=>{let{active:t,payload:s,label:r}=e;return t&&s&&s.length?(0,a.jsxs)("div",{className:"bg-card/98 backdrop-blur-md border-2 border-border rounded-lg p-4 shadow-xl",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-foreground mb-3 border-b border-border pb-2",children:"".concat(r)}),s.map((e,t)=>(0,a.jsx)("p",{className:"text-sm font-medium mb-1",style:{color:e.color},children:"".concat(e.name,": ₺").concat(e.value.toLocaleString("tr-TR"))},t))]}):null};function eX(){let{toast:e}=(0,z.dj)(),{user:t}=(0,G.As)(),[s,c]=(0,r.useState)([]),[o,m]=(0,r.useState)(null),[u,g]=(0,r.useState)([]),[p,j]=(0,r.useState)([]),[f,v]=(0,r.useState)("area"),[y,b]=(0,r.useState)(!1),[N,w]=(0,r.useState)("gelir"),[k,A]=(0,r.useState)(null),[D,B]=(0,r.useState)(null),[_,q]=(0,r.useState)(!1),[et,es]=(0,r.useState)({description:"",amount:"",category:"Maaş",active:!0}),[ea,en]=(0,r.useState)(!1),[ei,el]=(0,r.useState)(!1),{openCalendar:ed,addCalendarEvent:ec}=(0,ef._)(),[em,ex]=(0,r.useState)(!1),[eh,eg]=(0,r.useState)(""),[eX,e0]=(0,r.useState)(!1),[e1,e3]=(0,r.useState)(""),[e2,e4]=(0,r.useState)("hepsi"),[e5,e6]=(0,r.useState)("hepsi"),[e8,e7]=(0,r.useState)(!1),[e9,te]=(0,r.useState)(1),[tt,ts]=(0,r.useState)(!0),[ta,tr]=(0,r.useState)(!1),[tn,ti]=(0,r.useState)(!1),[tl,td]=(0,r.useState)("list"),[tc,to]=(0,r.useState)("newest"),[tm,tx]=(0,r.useState)("month"),[tu,th]=(0,r.useState)(!0),tg=(0,r.useRef)(null),{createNotification:tp}=(0,M.E$)();(0,r.useEffect)(()=>{e7(!0),window.debugClearLocalStorage=()=>{console.log("Clearing localStorage for debugging...");try{let e=(0,T.Ar)();["transactions","notifications","settings","expenseThresholdAlert"].forEach(t=>{console.log("Removing ".concat(t,":"),e.getItem(t)),e.removeItem(t)}),console.log("localStorage cleared successfully"),window.location.reload()}catch(e){console.error("Error clearing localStorage:",e)}},console.log("Debug function available: window.debugClearLocalStorage()")},[]),(0,r.useEffect)(()=>{let e=()=>ts(!0),t=()=>ts(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),ts(navigator.onLine),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),(0,r.useEffect)(()=>{if(!R.auth)return;let e=R.auth.onAuthStateChanged(e=>{if(e);else try{let e=(0,T.Ar)(),t=e.getItem("transactions");t&&c((0,T.jD)(t,[]));let s=e.getItem("notifications");s&&g((0,T.jD)(s,[]))}catch(e){console.error("Failed to load from local storage",e)}});return()=>e()},[]),(0,r.useEffect)(()=>{if((null==t?void 0:t.uid)&&(0,O.T1)()){let e=(0,O.Jm)(null==t?void 0:t.uid,c);return()=>{e&&e()}}},[t]),(0,r.useEffect)(()=>{(async()=>{if((null==t?void 0:t.uid)&&(0,O.T1)())try{let e=await (0,O.Si)(null==t?void 0:t.uid);j(e||[])}catch(e){console.error("Failed to load recurring incomes:",e)}})()},[t]),(0,r.useEffect)(()=>{if((null==t?void 0:t.uid)&&(0,O.T1)()){let e=(0,O.Ms)(null==t?void 0:t.uid,e=>{let t=Number(null==e?void 0:e.monthResetDay);Number.isFinite(t)&&t>=1&&t<=31&&te(t)});return(0,O.h_)(null==t?void 0:t.uid).then(e=>{let t=Number(null==e?void 0:e.monthResetDay);Number.isFinite(t)&&t>=1&&t<=31&&te(t)}).catch(()=>{}),()=>{e&&e()}}try{let e=(0,T.Ar)().getItem("settings");if(e){let t=(0,T.jD)(e,{}),s=Number(null==t?void 0:t.monthResetDay);Number.isFinite(s)&&s>=1&&s<=31&&te(s)}}catch(e){}},[t]),(0,r.useEffect)(()=>{let e=()=>{if(null==t||!t.uid)try{let e=(0,T.Ar)().getItem("transactions");e&&c((0,T.jD)(e,[]))}catch(e){}};return window.addEventListener("transactions:changed",e),()=>window.removeEventListener("transactions:changed",e)},[t]);let tj=e=>{try{localStorage.setItem("transactions",JSON.stringify(e))}catch(e){console.error("Failed to persist transactions",e)}},tf=e=>{try{localStorage.setItem("notifications",JSON.stringify(e))}catch(e){console.error("Failed to persist notifications",e)}},tv=async s=>{if(s)try{if((null==t?void 0:t.uid)&&(0,O.T1)()){await (0,O.Fp)(null==t?void 0:t.uid,s);let a=await (0,O.Si)(null==t?void 0:t.uid);j(a||[]),e({title:"Başarılı",description:"Tekrarlı gelir silindi."})}}catch(t){console.error("Failed to delete recurring income:",t),e({title:"Hata",description:"Tekrarlı gelir silinirken bir hata oluştu.",variant:"destructive"})}},ty=(0,r.useMemo)(()=>{let e=[...s];if("hepsi"!==e2&&(e=e.filter(e=>e.type===e2)),"hepsi"!==e5&&(e=e.filter(e=>e.category===e5)),eX&&(e=e.filter(e=>"Eşitleme"===e.category)),e1.trim()){let t=e1.trim().toLowerCase();e=e.filter(e=>e.description.toLowerCase().includes(t)||e.category.toLowerCase().includes(t)||e.amount.toString().includes(t))}return e.sort((e,t)=>{switch(tc){case"newest":let s=e.createdAt?new Date(e.createdAt).getTime():new Date(e.date).getTime();return(t.createdAt?new Date(t.createdAt).getTime():new Date(t.date).getTime())-s;case"oldest":return(e.createdAt?new Date(e.createdAt).getTime():new Date(e.date).getTime())-(t.createdAt?new Date(t.createdAt).getTime():new Date(t.date).getTime());case"amount-high":return t.amount-e.amount;case"amount-low":return e.amount-t.amount;default:let a=e.createdAt?new Date(e.createdAt).getTime():new Date(e.date).getTime();return(t.createdAt?new Date(t.createdAt).getTime():new Date(t.date).getTime())-a}})},[s,e1,e2,e5,eX,tc]),tb=e=>{w(e),b(!0)},tN=async a=>{console.log("onAdd called with:",a),m(a.date);let r={...a,id:crypto.randomUUID(),createdAt:Date.now()},n=[r,...s];if(c(n),tp("transaction_alert",{type:a.type,amount:(0,T.tn)(Math.abs(a.amount)),description:a.description},"low"),ec({date:new Date(a.date),type:"gelir"===a.type?"income":"expense",description:"".concat(a.description," • ₺").concat(Math.abs(a.amount).toLocaleString("tr-TR")),amount:Math.abs(a.amount),title:a.description,category:a.category}),(null==t?void 0:t.uid)&&tt)try{if(await (0,O.addTransaction)(null==t?void 0:t.uid,r)){if(a.__recurMonthly&&"gelir"===a.type){console.log("Creating recurring income:",a);let e=(()=>{let e=new Date(a.date),t=new Date(e);return t.setMonth(t.getMonth()+1),t.toISOString().slice(0,10)})();await (0,O.UI)(null==t?void 0:t.uid,{description:a.description,amount:a.amount,category:a.category,nextDate:e,active:!0});let s=await (0,O.Si)(null==t?void 0:t.uid);j(s||[]),console.log("Recurring income created, updated list")}let s="gelir"===a.type?"Yeni Gelir":"Yeni Gider",r="".concat(a.description," • ").concat((0,T.tn)(Math.abs(a.amount)));await (0,O.z8)(null==t?void 0:t.uid,{message:"".concat(s,": ").concat(r),type:"info",read:!1,timestamp:Date.now()}),e({title:s,description:r});try{window.dispatchEvent(new Event("transactions:refresh-request"))}catch(e){}}}catch(t){console.error("\xc7evrimi\xe7i işlem kaydedilirken hata:",t),e({title:"\xc7evrimdışı Kayıt",description:"İşlem yerel olarak kaydedildi, internet bağlantısı olduğunda senkronize edilecek",variant:"default"})}else if(null==t?void 0:t.uid){let t="gelir"===a.type?"Yeni Gelir (\xc7evrimdışı)":"Yeni Gider (\xc7evrimdışı)",s="".concat(a.description," • ").concat((0,T.tn)(Math.abs(a.amount)));e({title:t,description:"".concat(s," - İnternet bağlantısı olduğunda senkronize edilecek"),variant:"default"})}else{tj(n);try{window.dispatchEvent(new Event("transactions:changed"))}catch(e){}let t="gelir"===a.type?"Yeni Gelir":"Yeni Gider",s="".concat(a.description," • ").concat((0,T.tn)(Math.abs(a.amount)));g(e=>{let a=[{id:crypto.randomUUID(),title:t,description:s,date:new Date().toISOString(),read:!1},...e];return tf(a),a}),e({title:t,description:s})}},tw=async s=>{if(c(e=>e.map(e=>e.id===s.id?s:e)),(null==t?void 0:t.uid)&&s.id&&tt)try{await (0,O.upsertTransaction)(null==t?void 0:t.uid,s);let a="gelir"===s.type?"Gelir G\xfcncellendi":"Gider G\xfcncellendi",r="".concat(s.description," • ").concat((0,T.tn)(Math.abs(s.amount)));await (0,O.z8)(null==t?void 0:t.uid,{message:"".concat(a,": ").concat(r),type:"info",read:!1,timestamp:Date.now()}),e({title:a,description:r});try{window.dispatchEvent(new Event("transactions:refresh-request"))}catch(e){}}catch(t){console.error("İşlem g\xfcncellenirken hata:",t),e({title:"\xc7evrimdışı G\xfcncelleme",description:"İşlem yerel olarak g\xfcncellendi, internet bağlantısı olduğunda senkronize edilecek"})}else{c(e=>{let t=e.map(e=>e.id===s.id?s:e);tj(t);try{window.dispatchEvent(new Event("transactions:changed"))}catch(e){}return t});let t="gelir"===s.type?"Gelir G\xfcncellendi":"Gider G\xfcncellendi",a="".concat(s.description," • ").concat((0,T.tn)(Math.abs(s.amount)));g(e=>{let s=[{id:crypto.randomUUID(),title:t,description:a,date:new Date().toISOString(),read:!1},...e];return tf(s),s}),e({title:t,description:a})}},tk=async a=>{let r=s.find(e=>e.id===a);if(c(e=>e.filter(e=>e.id!==a)),(null==t?void 0:t.uid)&&tt)try{await (0,O.removeTransaction)(null==t?void 0:t.uid,a);try{window.dispatchEvent(new Event("transactions:refresh-request"))}catch(e){}}catch(t){console.error("İşlem silinirken hata:",t),e({title:"\xc7evrimdışı Silme",description:"İşlem yerel olarak silindi, internet bağlantısı olduğunda senkronize edilecek"})}if(r){let e="gelir"===r.type?"Gelir Silindi":"Gider Silindi",s="".concat(r.description," • ").concat((0,T.tn)(Math.abs(r.amount)));(null==t?void 0:t.uid)&&tt?await (0,O.z8)(null==t?void 0:t.uid,{message:"".concat(e,": ").concat(s),type:"info",read:!1,timestamp:Date.now()}):g(t=>{let a=[{id:crypto.randomUUID(),title:e,description:s,date:new Date().toISOString(),read:!1},...t];return tf(a),a})}},{totalBalance:tA,previousBalance:tD,periodBalance:tS,monthlyIncome:tE,monthlyExpenses:tC,monthlyData:tT,expenseCategories:tz,predictions:tM,dailyExpenseData:tG}=(0,r.useMemo)(()=>{let e,t;let a=new Date,r=a.getFullYear(),n=a.getMonth(),i=a.getDate(),l=Math.min(Math.max(1,e9),28);i>=l?(e=new Date(r,n,l),t=new Date(r,n+1,l-1)):(e=new Date(r,n-1,l),t=new Date(r,n,l-1)),t.setHours(23,59,59,999);let d=s.filter(s=>{let a=new Date(s.date);return a>=e&&a<=t}),c=d.filter(e=>"gelir"===e.type&&"Eşitleme"!==e.category&&"Devreden"!==e.category).reduce((e,t)=>e+t.amount,0),o=d.filter(e=>"gider"===e.type&&"Eşitleme"!==e.category&&"Devreden"!==e.category).reduce((e,t)=>e+t.amount,0),m=s.reduce((e,t)=>e+("gelir"===t.type?t.amount:-t.amount),0),x=d.reduce((e,t)=>e+("gelir"===t.type?t.amount:-t.amount),0),u=Array.from({length:12},(e,t)=>{let a=new Date(r,t,1).toLocaleString("tr-TR",{month:"long"}),n=s.filter(e=>{let s=new Date(e.date);return s.getFullYear()===r&&s.getMonth()===t}),i=n.filter(e=>"gelir"===e.type&&"Eşitleme"!==e.category&&"Devreden"!==e.category).reduce((e,t)=>e+t.amount,0),l=n.filter(e=>"gider"===e.type&&"Eşitleme"!==e.category&&"Devreden"!==e.category).reduce((e,t)=>e+t.amount,0);return{month:a,gelir:i,gider:l,tasarruf:i-l}}),h=Object.entries(d.filter(e=>"gider"===e.type&&"Eşitleme"!==e.category&&"Devreden"!==e.category).reduce((e,t)=>(e[t.category]||(e[t.category]=0),e[t.category]+=t.amount,e),{})).map((e,t)=>{let[s,a]=e;return{name:s,value:Number(a),percentage:o>0?Math.round(Number(a)/o*100):0,color:eV[t%eV.length]}}).sort((e,t)=>e.value===t.value?0:e.value<t.value?1:-1);u[u.length-1];let g=u.reduce((e,t)=>e+t.gelir,0)/Math.max(u.length,1),p=u.reduce((e,t)=>e+t.gider,0)/Math.max(u.length,1),j=[],f=new Date;for(let e=1;e<=3;e++){let t=new Date(f.getFullYear(),f.getMonth()+e,1).toLocaleDateString("tr-TR",{month:"short",year:"numeric"}),s=Math.round(g*(.95+.1*Math.random())),a=Math.round(p*(.95+.1*Math.random()));j.push({month:t,tahminGelir:s,tahminGider:a,tahminTasarruf:s-a})}let v=d.filter(e=>"gider"===e.type&&"Eşitleme"!==e.category&&"Devreden"!==e.category),y={};return v.forEach(e=>{let t=new Date(e.date).toLocaleDateString("tr-TR",{weekday:"long"});y[t]||(y[t]={amount:0,count:0}),y[t].amount+=e.amount,y[t].count+=1}),{totalBalance:m,previousBalance:m-x,periodBalance:x,monthlyIncome:c,monthlyExpenses:o,monthlyData:u,expenseCategories:h,predictions:j,dailyExpenseData:["Pazartesi","Salı","\xc7arşamba","Perşembe","Cuma","Cumartesi","Pazar"].map(e=>{var t,s;return{day:e,amount:(null===(t=y[e])||void 0===t?void 0:t.amount)||0,transactionCount:(null===(s=y[e])||void 0===s?void 0:s.count)||0}})}},[s,e9]),tO=(0,r.useMemo)(()=>{var e;let t,a;let r=new Date,n=r.getFullYear(),i=r.getMonth(),l=r.getDate(),d=Math.min(Math.max(1,e9),28);t=l>=d?new Date(n,i,d):new Date(n,i-1,d),(a=l>=d?new Date(n,i+1,d-1):new Date(n,i,d-1)).setHours(23,59,59,999);let c=s.filter(e=>{let s=new Date(e.date);return s>=t&&s<=a}),o=c.filter(e=>"gelir"===e.type&&"Eşitleme"!==e.category&&"Devreden"!==e.category).reduce((e,t)=>e+t.amount,0),m=c.filter(e=>"gider"===e.type&&"Eşitleme"!==e.category&&"Devreden"!==e.category).reduce((e,t)=>e+t.amount,0),x=Object.entries(c.filter(e=>"gider"===e.type&&"Eşitleme"!==e.category&&"Devreden"!==e.category).reduce((e,t)=>(e[t.category]||(e[t.category]=0),e[t.category]+=t.amount,e),{})).map((e,t)=>{let[s,a]=e;return{name:s,value:Number(a),percentage:m>0?Math.round(Number(a)/m*100):0,color:eV[t%eV.length]}}).sort((e,t)=>e.value===t.value?0:e.value<t.value?1:-1),u=x.slice(0,5),h=Array.from({length:7},(e,t)=>{let s=c.filter(e=>new Date(e.date).getDay()===t&&"gider"===e.type&&"Eşitleme"!==e.category);return{day:["Pazar","Pazartesi","Salı","\xc7arşamba","Perşembe","Cuma","Cumartesi"][t],amount:s.reduce((e,t)=>e+t.amount,0),count:s.length}}),g=Array.from({length:7},(e,t)=>{let s=new Date;s.setDate(s.getDate()-t);let a=c.filter(e=>new Date(e.date).toDateString()===s.toDateString());return{date:s.toLocaleDateString("tr-TR",{day:"numeric",month:"short"}),income:a.filter(e=>"gelir"===e.type).reduce((e,t)=>e+t.amount,0),expense:a.filter(e=>"gider"===e.type).reduce((e,t)=>e+t.amount,0),count:a.length}}).reverse();return{topCategories:u,weeklySpending:h,last7Days:g,expenseFrequency:x.map(e=>({...e,frequency:c.filter(t=>t.category===e.name&&"gider"===t.type).length,avgAmount:e.value/Math.max(1,c.filter(t=>t.category===e.name&&"gider"===t.type).length)})),savingsRate:o>0?(o-m)/o*100:0,totalTransactions:c.length,avgDailyExpense:m/Math.max(1,new Date().getDate()),biggestExpense:Math.max(...c.filter(e=>"gider"===e.type).map(e=>e.amount),0),mostFrequentCategory:(null===(e=x[0])||void 0===e?void 0:e.name)||"N/A"}},[s,e9]);(0,r.useEffect)(()=>{try{let s;let a=localStorage.getItem("settings");if(!a)return;let r=(0,T.jD)(a,{}),n=Number(null==r?void 0:r.expenseAlertThreshold),i=(null==r?void 0:r.notifications)!==!1,l=!!(null==r?void 0:r.expenseAlertTriggerOnEqual),d=!!(null==r?void 0:r.expenseAlertRealertOnThresholdChange);if(!i||!isFinite(n)||n<=0)return;let c=new Date,o=c.getFullYear(),m=c.getMonth(),x=(c.getDate()>=e9?new Date(o,m,e9):new Date(o,m-1,e9)).toISOString().slice(0,10),u=c.toISOString().slice(0,10);if(l?tC>=n:tC>n){let s=null;try{s=(0,T.jD)(localStorage.getItem("expenseThresholdAlert")||"null",null)}catch(e){}if(!(s&&s.periodKey===x&&s.dayKey===u&&(!d||s.threshold===n))){let s="Aylık gider eşiği aşıldı",a="Bu ay: ".concat((0,T.tn)(tC)," (").concat(l?"≥":">"," ").concat((0,T.tn)(n),")");(null==t?void 0:t.uid)?(0,O.z8)(null==t?void 0:t.uid,{message:"".concat(s,": ").concat(a),type:"alert",read:!1,timestamp:Date.now()}):g(e=>{let t=[{id:crypto.randomUUID(),title:s,description:a,date:new Date().toISOString(),read:!1},...e];return tf(t),t}),e({title:s,description:a});try{localStorage.setItem("expenseThresholdAlert",JSON.stringify({periodKey:x,dayKey:u,threshold:n}))}catch(e){}}}}catch(e){}},[tC,null==t?void 0:t.uid,e]),(0,r.useEffect)(()=>{let e=window.setTimeout(()=>window.dispatchEvent(new Event("resize")),50);return()=>window.clearTimeout(e)},[f]),(0,r.useEffect)(()=>{if(!e8)return;let e=window.setTimeout(()=>window.dispatchEvent(new Event("resize")),50),t=window.setTimeout(()=>window.dispatchEvent(new Event("resize")),250),s=window.setTimeout(()=>window.dispatchEvent(new Event("resize")),750);return()=>{window.clearTimeout(e),window.clearTimeout(t),window.clearTimeout(s)}},[e8]),(0,r.useEffect)(()=>{let e=async()=>{if((null==t?void 0:t.uid)&&(0,O.T1)())try{let e=await (0,O.$H)(null==t?void 0:t.uid);if(!Array.isArray(e)||0===e.length)return;let s=new Date;for(let a of e){if(a.nextBillingDate){let e=new Date(a.nextBillingDate),r=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(s.getFullYear(),s.getMonth(),s.getDate());if(r<=n){await (0,O.z8)(null==t?void 0:t.uid,{message:"Abonelik g\xfcn\xfc: ".concat(a.name," • ").concat((0,T.tn)(Number(a.price)||0)),type:"reminder",read:!1,timestamp:Date.now()});let e=new Date(n);e.setMonth(e.getMonth()+1),await (0,O.Zl)(null==t?void 0:t.uid,{...a,nextBillingDate:e.toISOString()})}}if(a.cancellationReminderDate){let e=new Date(a.cancellationReminderDate),r=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(s.getFullYear(),s.getMonth(),s.getDate());r<=n&&(await (0,O.z8)(null==t?void 0:t.uid,{message:"Abonelik İptal Hatırlatıcı: ".concat(a.name," aboneliğini iptal etmek istiyor musunuz?"),type:"reminder",read:!1,timestamp:Date.now()}),await (0,O.Zl)(null==t?void 0:t.uid,{...a,cancellationReminderDate:void 0}))}}}catch(e){}};e();let s=()=>e();return window.addEventListener("focus",s),()=>window.removeEventListener("focus",s)},[t]),(0,r.useEffect)(()=>{let e=async()=>{if((null==t?void 0:t.uid)&&(0,O.T1)())try{let e=await (0,O.Si)(null==t?void 0:t.uid);if(!Array.isArray(e)||0===e.length)return;let s=new Date,a=new Date(s.getFullYear(),s.getMonth(),s.getDate());for(let s of e){if(!1===s.active)continue;let e=s.nextDate?new Date(s.nextDate):null;if(e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())<=a){let e={type:"gelir",amount:Number(s.amount)||0,description:s.description,category:s.category,date:a.toISOString().slice(0,10)};await tN(e);let r=new Date(a);r.setMonth(r.getMonth()+1),await (0,O.UI)(null==t?void 0:t.uid,{...s,nextDate:r.toISOString().slice(0,10)})}}}catch(e){}};e();let s=()=>e();return window.addEventListener("focus",s),()=>window.removeEventListener("focus",s)},[t]);let tR=e=>(0,T.c$)(e);return(0,a.jsx)(G.q_,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(ej.PWAInstallBanner,{}),(0,a.jsx)(J,{children:(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8 space-y-8",children:[(0,a.jsx)(J,{children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Finansal Dashboard"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Aylık gelir, gider ve tasarruf analizi"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-4",children:[(0,a.jsx)("div",{children:(0,a.jsxs)(i.$,{onClick:()=>tr(!0),variant:"outline",size:"sm",className:"w-full sm:w-auto border-blue-300 text-blue-700 hover:bg-blue-50",children:[(0,a.jsx)(eu.A,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Mobil Uygulama İndir"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Uygulama İndir"})]})}),(0,a.jsx)(Q,{children:(0,a.jsxs)(i.$,{onClick:()=>tb("gelir"),className:"w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white",children:[(0,a.jsx)(Z.A,{className:"w-5 h-5 mr-2"})," Gelir Ekle"]})}),(0,a.jsx)(Q,{children:(0,a.jsxs)(i.$,{onClick:()=>tb("gider"),className:"w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[(0,a.jsx)(ev.A,{className:"w-5 h-5 mr-2"})," Gider Ekle"]})})]})]})}),(0,a.jsx)(X,{children:(0,a.jsxs)("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4 lg:gap-6",children:[(0,a.jsx)(ee,{children:(0,a.jsx)(Q,{children:(0,a.jsx)(J,{children:(0,a.jsxs)(n.Zp,{className:"bg-gradient-to-br from-primary/20 to-primary/5 border-primary/30 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2 px-3 sm:px-6 pt-3 sm:pt-6",children:[(0,a.jsx)(n.ZB,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Toplam Bakiye"}),(0,a.jsx)(ey.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-primary"})]}),(0,a.jsxs)(n.Wu,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[(0,a.jsx)("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-foreground",children:(0,T.tn)(tA)}),(0,a.jsxs)(E.AM,{open:em,onOpenChange:ex,children:[(0,a.jsx)(E.Wv,{asChild:!0,children:(0,a.jsx)(i.$,{size:"sm",variant:"outline",className:"text-xs",children:"Eşitle"})}),(0,a.jsx)(E.hl,{align:"start",className:"w-80 space-y-3",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(C.J,{children:"Cebimdeki Ger\xe7ek Para (₺)"}),(0,a.jsx)(x.p,{value:eh,onChange:e=>eg(e.target.value),inputMode:"decimal",type:"text"}),(0,a.jsx)("p",{className:"text-[11px] text-muted-foreground",children:"Buraya c\xfczdandaki/paradaki g\xfcncel tutarı yaz. Sistem fark kadar otomatik Gelir/Gider (Eşitleme) ekler."}),(0,a.jsx)(i.$,{size:"sm",variant:"secondary",onClick:async()=>{let e=eh?Number(eh.trim().replace(/\s/g,"").replace(/\./g,"").replace(",",".")):NaN;if(!isFinite(e))return;let t=e-tA;if(0!==t){let e="".concat(t>0?"Bakiye Eşitleme (Gelir)":"Bakiye Eşitleme (Gider)"," • Fark: ").concat((0,T.tn)(Math.abs(t))),s={type:t>0?"gelir":"gider",amount:Math.abs(t),description:e,category:"Eşitleme",date:new Date().toISOString().slice(0,10)};await tN(s)}ex(!1)},children:"Eldeki Paraya Eşitle"})]})})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-1 text-sm text-muted-foreground mt-1",children:(0,a.jsx)("span",{children:"K\xfcm\xfclatif bakiye"})})]})]})})})}),(0,a.jsx)(ee,{children:(0,a.jsx)(Q,{children:(0,a.jsx)(J,{children:(0,a.jsxs)(n.Zp,{className:"bg-gradient-to-br from-blue-500/20 to-blue-500/5 border-blue-500/30 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium text-muted-foreground",children:"\xd6nceki D\xf6nem"}),(0,a.jsx)(eb.A,{className:"h-4 w-4 text-blue-600"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-foreground",children:(0,T.tn)(tD)}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Devir bakiye"})]})]})})})}),(0,a.jsx)(ee,{children:(0,a.jsx)(Q,{children:(0,a.jsx)(J,{children:(0,a.jsxs)(n.Zp,{className:"bg-gradient-to-br from-green-500/20 to-green-500/5 border-green-500/30 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Aylık Gelir"}),(0,a.jsx)(U.A,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-foreground",children:(0,T.tn)(tE)}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Bu ayki toplam gelir"})]})]})})})}),(0,a.jsx)(ee,{children:(0,a.jsx)(Q,{children:(0,a.jsx)(J,{children:(0,a.jsxs)(n.Zp,{className:"bg-gradient-to-br from-red-500/20 to-red-500/5 border-red-500/30 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Aylık Gider"}),(0,a.jsx)(Y.A,{className:"h-4 w-4 text-red-600"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-foreground",children:(0,T.tn)(tC)}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Bu ayki toplam gider"})]})]})})})}),(0,a.jsx)(ee,{children:(0,a.jsx)(Q,{children:(0,a.jsx)(J,{children:(0,a.jsxs)(n.Zp,{className:"bg-gradient-to-br from-chart-3/20 to-chart-3/5 border-chart-3/30 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Tasarruf"}),(0,a.jsx)(eN.A,{className:"h-4 w-4 text-chart-3"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-foreground",children:(0,T.tn)(tE-tC)}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Bu ayki tasarruf"})]})]})})})})]})}),(0,a.jsxs)("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[(0,a.jsx)(V,{delay:.1,children:(0,a.jsxs)(n.Zp,{className:"border-border/50 min-w-0 hover:shadow-xl transition-all duration-300 h-fit",children:[(0,a.jsx)(n.aR,{className:"px-3 sm:px-6 pt-3 sm:pt-6 pb-3 sm:pb-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(ew.A,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),(0,a.jsx)("span",{className:"text-sm sm:text-base",children:"Gelişmiş Finansal Analiz"})]}),(0,a.jsx)(n.BT,{className:"text-xs sm:text-sm",children:"Detaylı gelir, gider ve trend analizi"})]}),(0,a.jsxs)("div",{className:"flex items-center flex-wrap gap-1 sm:gap-2",children:[(0,a.jsx)(Q,{children:(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>ti(!tn),className:"text-xs px-2 py-1",children:tn?(0,a.jsx)(ek.A,{className:"h-3 w-3"}):(0,a.jsx)(eA.A,{className:"h-3 w-3"})})}),(0,a.jsx)(Q,{children:(0,a.jsx)(i.$,{variant:"area"===f?"default":"outline",size:"sm",onClick:()=>v("area"),className:"text-xs px-2 py-1",children:"Alan"})}),(0,a.jsx)(Q,{children:(0,a.jsx)(i.$,{variant:"line"===f?"default":"outline",size:"sm",onClick:()=>v("line"),className:"text-xs px-2 py-1",children:"\xc7izgi"})}),(0,a.jsx)(Q,{children:(0,a.jsx)(i.$,{variant:"bar"===f?"default":"outline",size:"sm",onClick:()=>v("bar"),className:"text-xs px-2 py-1",children:"\xc7ubuk"})})]})]})}),(0,a.jsxs)(n.Wu,{className:"min-w-0 px-3 sm:px-6 pb-3 sm:pb-6",children:[(0,a.jsx)("div",{ref:tg,className:"h-48 sm:h-64 w-full min-w-0 mb-4",children:e8?(()=>{let e={data:tT,margin:{top:10,right:30,left:0,bottom:0}},t=(0,a.jsx)(eP.d,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.4}),s=(0,a.jsx)(eB.W,{dataKey:"month",tick:{fill:"hsl(var(--foreground))",fontSize:12,fontWeight:500},axisLine:{stroke:"hsl(var(--border))",strokeWidth:2}}),r=(0,a.jsx)(e$.h,{tick:{fill:"hsl(var(--foreground))",fontSize:12,fontWeight:500},axisLine:{stroke:"hsl(var(--border))",strokeWidth:2},tickFormatter:tR}),n=(0,a.jsx)(eL.m,{content:(0,a.jsx)(eQ,{})}),i=(0,a.jsx)(eW.s,{});return"area"===f?(0,a.jsx)(eU.u,{width:"100%",height:"100%",children:(0,a.jsxs)(eY.Q,{...e,children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"gelirGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#16a34a",stopOpacity:.9}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#16a34a",stopOpacity:.1})]}),(0,a.jsxs)("linearGradient",{id:"giderGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#dc2626",stopOpacity:.9}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#dc2626",stopOpacity:.1})]}),(0,a.jsxs)("linearGradient",{id:"tasarrufGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"hsl(var(--chart-3))",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"hsl(var(--chart-3))",stopOpacity:.1})]})]}),t,s,r,n,i,(0,a.jsx)(e_.Gk,{type:"monotone",dataKey:"gelir",stroke:"#16a34a",fillOpacity:1,fill:"url(#gelirGradient)",strokeWidth:3,name:"Gelir"}),(0,a.jsx)(e_.Gk,{type:"monotone",dataKey:"gider",stroke:"#dc2626",fillOpacity:1,fill:"url(#giderGradient)",strokeWidth:3,name:"Gider"}),(0,a.jsx)(e_.Gk,{type:"monotone",dataKey:"tasarruf",stroke:"hsl(var(--chart-3))",fillOpacity:1,fill:"url(#tasarrufGradient)",strokeWidth:3,name:"Tasarruf"})]})}):"line"===f?(0,a.jsx)(eU.u,{width:"100%",height:"100%",children:(0,a.jsxs)(eZ.b,{...e,children:[t,s,r,n,i,(0,a.jsx)(eH.N,{type:"monotone",dataKey:"gelir",stroke:"#16a34a",strokeWidth:4,dot:{r:5},activeDot:{r:7},name:"Gelir"}),(0,a.jsx)(eH.N,{type:"monotone",dataKey:"gider",stroke:"#dc2626",strokeWidth:4,dot:{r:5},activeDot:{r:7},name:"Gider"}),(0,a.jsx)(eH.N,{type:"monotone",dataKey:"tasarruf",stroke:"hsl(var(--chart-3))",strokeWidth:4,dot:{r:5},activeDot:{r:7},name:"Tasarruf"})]})}):(0,a.jsx)(eU.u,{width:"100%",height:"100%",children:(0,a.jsxs)(eq.E,{...e,children:[t,s,r,n,i,(0,a.jsx)(eJ.y,{dataKey:"gelir",fill:"#16a34a",name:"Gelir",radius:[4,4,0,0]}),(0,a.jsx)(eJ.y,{dataKey:"gider",fill:"#dc2626",name:"Gider",radius:[4,4,0,0]}),(0,a.jsx)(eJ.y,{dataKey:"tasarruf",fill:"hsl(var(--chart-3))",name:"Tasarruf",radius:[4,4,0,0]})]})})})():(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)(ew.A,{className:"h-12 w-12 sm:h-16 sm:w-16 text-muted-foreground animate-pulse"})})}),tn&&(0,a.jsx)(J,{children:(0,a.jsxs)("div",{className:"border-t pt-4 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-2 sm:p-3 rounded-lg border border-green-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(U.A,{className:"h-3 w-3 text-green-600"}),(0,a.jsx)("span",{className:"text-xs text-green-700 font-medium",children:"Tasarruf Oranı"})]}),(0,a.jsxs)("p",{className:"text-sm sm:text-base font-bold text-green-800",children:[tO.savingsRate.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 p-2 sm:p-3 rounded-lg border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(eD.A,{className:"h-3 w-3 text-blue-600"}),(0,a.jsx)("span",{className:"text-xs text-blue-700 font-medium",children:"Toplam İşlem"})]}),(0,a.jsx)("p",{className:"text-sm sm:text-base font-bold text-blue-800",children:tO.totalTransactions})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 p-2 sm:p-3 rounded-lg border border-orange-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(eS.A,{className:"h-3 w-3 text-orange-600"}),(0,a.jsx)("span",{className:"text-xs text-orange-700 font-medium",children:"G\xfcnl\xfck Ort."})]}),(0,a.jsx)("p",{className:"text-sm sm:text-base font-bold text-orange-800",children:(0,T.c$)(tO.avgDailyExpense)})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-2 sm:p-3 rounded-lg border border-purple-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(eE.A,{className:"h-3 w-3 text-purple-600"}),(0,a.jsx)("span",{className:"text-xs text-purple-700 font-medium",children:"En B\xfcy\xfck"})]}),(0,a.jsx)("p",{className:"text-sm sm:text-base font-bold text-purple-800",children:(0,T.c$)(tO.biggestExpense)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium mb-2 flex items-center gap-2 text-sm",children:[(0,a.jsx)(eC.A,{className:"h-3 w-3 text-primary"}),"Haftalık Harcama"]}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1",children:tO.weeklySpending.map((e,t)=>{let s=Math.max(...tO.weeklySpending.map(e=>e.amount)),r=s>0?e.amount/s*100:0;return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"h-8 sm:h-10 flex items-end justify-center mb-1",children:(0,a.jsx)("div",{className:"w-2 sm:w-3 bg-gradient-to-t from-blue-600 to-blue-400 rounded-t transition-all duration-500",style:{height:"".concat(Math.max(4,r),"%")}})}),(0,a.jsx)("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.day.slice(0,2)})]},t)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium mb-2 flex items-center gap-2 text-sm",children:[(0,a.jsx)(eT.A,{className:"h-3 w-3 text-primary"}),"Top Kategoriler"]}),(0,a.jsx)("div",{className:"space-y-2",children:tO.topCategories.slice(0,3).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:e.name})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm font-bold",children:(0,T.c$)(e.value)}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.percentage,"%"]})]})]},e.name))})]})]})})]})]})}),(0,a.jsx)(V,{delay:.2,children:(0,a.jsxs)(n.Zp,{className:"border-border/50 min-w-0 hover:shadow-xl transition-all duration-300 h-fit",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(U.A,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("span",{children:"Tahmini Gelir-Gider"})]}),(0,a.jsx)(n.BT,{children:"Gelecek 3 ay tahmini"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:tM.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/40 border border-border/30",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center",children:(0,a.jsx)(eC.A,{className:"h-4 w-4 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.month}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Tahmin"})]})]}),(0,a.jsxs)("div",{className:"text-right space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs",children:[(0,a.jsxs)("span",{className:"text-green-600",children:["Gelir: ",(0,T.c$)(e.tahminGelir)]}),(0,a.jsxs)("span",{className:"text-red-600",children:["Gider: ",(0,T.c$)(e.tahminGider)]})]}),(0,a.jsxs)("div",{className:"text-sm font-bold ".concat(e.tahminTasarruf>=0?"text-green-600":"text-red-600"),children:[e.tahminTasarruf>=0?"+":"",(0,T.c$)(e.tahminTasarruf)]})]})]},e.month))})})]})}),(0,a.jsx)(V,{delay:.3,children:(0,a.jsxs)(n.Zp,{className:"border-border/50 hover:shadow-xl transition-all duration-300 h-fit",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L.A,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("span",{children:"Aylık Tekrarlı Gelirler"}),(0,a.jsxs)(l.E,{variant:"outline",className:"ml-2",children:[p.length," gelir"]})]}),(0,a.jsx)(Q,{children:(0,a.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{w("gelir"),b(!0)},className:"text-green-500 hover:text-green-400 hover:bg-green-500/10 border-green-500/30",children:[(0,a.jsx)(Z.A,{className:"h-4 w-4 mr-1"}),"Ekle"]})})]}),(0,a.jsx)(n.BT,{children:"Otomatik olarak eklenen sabit gelirleriniz"})]}),(0,a.jsx)(n.Wu,{children:p.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[p.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50 border border-border/60 hover:bg-muted/70 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:(0,a.jsx)(ez.A,{className:"h-5 w-5 text-foreground"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-foreground",children:e.description||"İsimsiz Gelir"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.category||"Genel"}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Sonraki: ",e.nextDate?(0,T.gn)(e.nextDate):"Belirsiz"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-green-500",children:["+",(0,T.tn)(e.amount||0)]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:!1!==e.active?(0,a.jsxs)(l.E,{variant:"outline",className:"text-green-500 border-green-500/30",children:[(0,a.jsx)(er.A,{className:"h-3 w-3 mr-1"}),"Aktif"]}):(0,a.jsx)(l.E,{variant:"outline",className:"text-muted-foreground",children:"Pasif"})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(Q,{children:(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{B(e),q(!0)},className:"h-8 w-8 p-0 hover:bg-muted",children:(0,a.jsx)(K.A,{className:"h-4 w-4"})})}),(0,a.jsx)(Q,{children:(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>tv(e.id),className:"h-8 w-8 p-0 text-red-500 hover:text-red-400 hover:bg-red-500/10",children:(0,a.jsx)(P.A,{className:"h-4 w-4"})})})]})]})]},e.id||t)),(0,a.jsxs)("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg border border-border/60",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-foreground",children:[(0,a.jsx)(eD.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Aylık Toplam Gelir Beklentisi"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold text-green-500 mt-1",children:["+",(0,T.tn)(p.filter(e=>!1!==e.active).reduce((e,t)=>e+(t.amount||0),0))]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(L.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Hen\xfcz tekrarlı gelir yok"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Maaş, kira geliri gibi d\xfczenli gelirlerinizi ekleyerek otomatik takip edin."}),(0,a.jsxs)(i.$,{onClick:()=>{w("gelir"),b(!0)},className:"inline-flex items-center space-x-2",children:[(0,a.jsx)(Z.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"İlk Geliri Ekle"})]})]})})]})})]}),(0,a.jsx)(V,{delay:.3,children:(0,a.jsxs)(n.Zp,{className:"border-border/50 hover:shadow-xl transition-all duration-300",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eM.A,{className:"h-5 w-5 text-primary"}),(0,a.jsx)("span",{children:"Gelişmiş Son İşlemler"}),(0,a.jsxs)(l.E,{variant:"outline",className:"ml-2",children:[ty.length," işlem"]})]}),(0,a.jsxs)("div",{className:"flex gap-1 sm:gap-2",children:[(0,a.jsx)(Q,{children:(0,a.jsx)(i.$,{variant:"grid"===tl?"default":"outline",size:"sm",onClick:()=>td("grid"),className:"h-7 sm:h-8 px-2",children:(0,a.jsx)(eT.A,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),(0,a.jsx)(Q,{children:(0,a.jsx)(i.$,{variant:"list"===tl?"default":"outline",size:"sm",onClick:()=>td("list"),className:"h-7 sm:h-8 px-2",children:(0,a.jsx)(eD.A,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),(0,a.jsx)(Q,{children:(0,a.jsxs)(E.AM,{children:[(0,a.jsx)(E.Wv,{asChild:!0,children:(0,a.jsxs)(i.$,{variant:"outline",size:"sm",className:"flex items-center gap-1 sm:gap-2 h-7 sm:h-8 px-2",children:[(0,a.jsx)(eG.A,{className:"h-3 w-3 sm:h-4 sm:w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline text-xs",children:"Sırala"})]})}),(0,a.jsx)(E.hl,{className:"w-56",align:"end",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-sm",children:"Sıralama"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(i.$,{variant:"newest"===tc?"default":"ghost",size:"sm",className:"w-full justify-start",onClick:()=>to("newest"),children:[(0,a.jsx)(eO.A,{className:"h-4 w-4 mr-2"}),"Yeniden Eskiye"]}),(0,a.jsxs)(i.$,{variant:"oldest"===tc?"default":"ghost",size:"sm",className:"w-full justify-start",onClick:()=>to("oldest"),children:[(0,a.jsx)(eR.A,{className:"h-4 w-4 mr-2"}),"Eskiden Yeniye"]}),(0,a.jsxs)(i.$,{variant:"amount-high"===tc?"default":"ghost",size:"sm",className:"w-full justify-start",onClick:()=>to("amount-high"),children:[(0,a.jsx)(eO.A,{className:"h-4 w-4 mr-2"}),"Tutar (Y\xfcksek→D\xfcş\xfck)"]}),(0,a.jsxs)(i.$,{variant:"amount-low"===tc?"default":"ghost",size:"sm",className:"w-full justify-start",onClick:()=>to("amount-low"),children:[(0,a.jsx)(eR.A,{className:"h-4 w-4 mr-2"}),"Tutar (D\xfcş\xfck→Y\xfcksek)"]})]})]})})]})}),(0,a.jsx)(Q,{children:(0,a.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{try{let t=(0,T.Ar)();["transactions","notifications","settings","expenseThresholdAlert"].forEach(e=>{console.log("Removing ".concat(e,":"),t.getItem(e)),t.removeItem(e)}),c([]),g([]);try{window.dispatchEvent(new Event("transactions:changed"))}catch(e){console.warn("Failed to dispatch event:",e)}e({title:"Temizlendi",description:"T\xfcm yerel veriler temizlendi."})}catch(t){console.error("LocalStorage temizlenirken hata:",t),e({title:"Hata",description:"Veriler temizlenirken bir hata oluştu.",variant:"destructive"})}},className:"flex items-center gap-1 sm:gap-2 text-red-600 hover:text-red-700 hover:bg-red-50 h-7 sm:h-8 px-2",children:[(0,a.jsx)(P.A,{className:"h-3 w-3 sm:h-4 sm:w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline text-xs",children:"Temizle"})]})}),(0,a.jsx)(Q,{children:(0,a.jsxs)(i.$,{variant:eX?"default":"outline",size:"sm",onClick:()=>e0(e=>!e),className:"h-7 sm:h-8 px-2 text-xs",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Sadece Eşitleme"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Eşit"})]})})]})]}),(0,a.jsxs)(n.BT,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"En son yapılan finansal işlemler ve detaylı analiz"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(U.A,{className:"h-3 w-3 text-green-500"}),(0,a.jsxs)("span",{children:[ty.filter(e=>"gelir"===e.type).length," gelir"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(Y.A,{className:"h-3 w-3 text-red-500"}),(0,a.jsxs)("span",{children:[ty.filter(e=>"gider"===e.type).length," gider"]})]})]})]})]}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 sm:gap-2 p-2 sm:p-3 bg-muted/30 rounded-lg",children:[(0,a.jsx)(J,{delay:.1,children:(0,a.jsx)(x.p,{placeholder:"İşlem ara...",value:e1,onChange:e=>e3(e.target.value),className:"h-8 sm:h-9 w-32 sm:w-48 md:w-64 text-xs sm:text-sm"})}),(0,a.jsx)(J,{delay:.2,children:(0,a.jsxs)(h.l6,{value:e2,onValueChange:e=>e4(e),children:[(0,a.jsx)(h.bq,{className:"h-8 sm:h-9 w-20 sm:w-28 text-xs sm:text-sm",children:(0,a.jsx)(h.yv,{placeholder:"T\xfcr"})}),(0,a.jsxs)(h.gC,{children:[(0,a.jsx)(h.eb,{value:"hepsi",children:"T\xfcm T\xfcrler"}),(0,a.jsx)(h.eb,{value:"gelir",children:"\uD83D\uDCB0 Gelir"}),(0,a.jsx)(h.eb,{value:"gider",children:"\uD83D\uDCB8 Gider"})]})]})}),(0,a.jsx)(J,{delay:.3,children:(0,a.jsxs)(h.l6,{value:e5,onValueChange:e6,children:[(0,a.jsx)(h.bq,{className:"h-8 sm:h-9 w-24 sm:w-36 text-xs sm:text-sm",children:(0,a.jsx)(h.yv,{placeholder:"Kategori"})}),(0,a.jsxs)(h.gC,{children:[(0,a.jsx)(h.eb,{value:"hepsi",children:"T\xfcm Kategoriler"}),Array.from(new Set(s.map(e=>e.category))).map(e=>(0,a.jsx)(h.eb,{value:e,children:e},e))]})]})}),(0,a.jsx)(J,{delay:.4,children:(0,a.jsxs)(h.l6,{value:tm,onValueChange:e=>tx(e),children:[(0,a.jsx)(h.bq,{className:"h-8 sm:h-9 w-20 sm:w-28 text-xs sm:text-sm",children:(0,a.jsx)(h.yv,{placeholder:"S\xfcre"})}),(0,a.jsxs)(h.gC,{children:[(0,a.jsx)(h.eb,{value:"week",children:"Bu Hafta"}),(0,a.jsx)(h.eb,{value:"month",children:"Bu Ay"}),(0,a.jsx)(h.eb,{value:"year",children:"Bu Yıl"})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"bg-muted/30 p-3 rounded-lg border border-border/60 hover:bg-muted/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(eI.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-500"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground font-medium",children:"Toplam Gelir"})]}),(0,a.jsx)("p",{className:"text-sm sm:text-lg font-bold text-green-500",children:(0,T.c$)(ty.filter(e=>"gelir"===e.type).reduce((e,t)=>e+t.amount,0))})]}),(0,a.jsxs)("div",{className:"bg-muted/30 p-3 rounded-lg border border-border/60 hover:bg-muted/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(eF.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-500"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground font-medium",children:"Toplam Gider"})]}),(0,a.jsx)("p",{className:"text-sm sm:text-lg font-bold text-red-500",children:(0,T.c$)(ty.filter(e=>"gider"===e.type).reduce((e,t)=>e+t.amount,0))})]}),(0,a.jsxs)("div",{className:"bg-muted/30 p-3 rounded-lg border border-border/60 hover:bg-muted/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(eK.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-blue-500"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground font-medium",children:"Son 7 G\xfcn"})]}),(0,a.jsxs)("p",{className:"text-sm sm:text-lg font-bold text-blue-500",children:[tO.last7Days.reduce((e,t)=>e+t.expense,0).toLocaleString("tr-TR"),"₺"]})]}),(0,a.jsxs)("div",{className:"bg-muted/30 p-3 rounded-lg border border-border/60 hover:bg-muted/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(eS.A,{className:"h-4 w-4 text-purple-500"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground font-medium",children:"Ortalama"})]}),(0,a.jsx)("p",{className:"text-lg font-bold text-purple-500",children:ty.length>0?(0,T.c$)(ty.reduce((e,t)=>e+t.amount,0)/ty.length):"0₺"})]})]}),(0,a.jsxs)(W,{onRefresh:async()=>{tt&&(null==t?void 0:t.uid)&&window.location.reload()},className:"max-h-96",children:[0===ty.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(eM.A,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Hen\xfcz işlem bulunmuyor."}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Filtreleri değiştirin veya yeni işlem ekleyin."})]}):(0,a.jsx)("div",{className:"grid"===tl?"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3":"space-y-2",children:ty.slice(0,20).map(e=>(0,a.jsx)($,{transaction:e,onEdit:e=>{A(e),w(e.type),b(!0)},onDelete:e=>tk(e.id)},e.id))}),ty.length>20&&(0,a.jsx)("div",{className:"text-center mt-4 p-3 bg-muted/30 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[ty.length-20," işlem daha var. Daha fazla g\xf6rmek i\xe7in filtreleyin."]})})]})]})]})})]})}),(0,a.jsx)(S,{open:y,onOpenChange:e=>{e||A(null),b(e)},onAdd:e=>{tN(e),A(null)},onUpdate:e=>{tw(e),A(null)},editing:k,defaultType:N}),(0,a.jsx)(F.$,{open:ei,onOpenChange:el}),(0,a.jsx)(I.S,{open:ea,onClose:()=>en(!1)}),(0,a.jsx)(d.lG,{open:_,onOpenChange:e=>{q(e),e?D&&es({description:D.description||"",amount:String(D.amount||""),category:D.category||"Maaş",active:!1!==D.active}):(B(null),es({description:"",amount:"",category:"Maaş",active:!0}))},children:(0,a.jsxs)(d.Cf,{className:"max-w-md",children:[(0,a.jsx)(d.c7,{children:(0,a.jsx)(d.L3,{children:D?"Tekrarlı Geliri D\xfczenle":"Yeni Tekrarlı Gelir"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(C.J,{htmlFor:"description",children:"A\xe7ıklama"}),(0,a.jsx)(x.p,{id:"description",placeholder:"Maaş, kira geliri vb.",value:et.description,onChange:e=>es(t=>({...t,description:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C.J,{htmlFor:"amount",children:"Tutar (₺)"}),(0,a.jsx)(x.p,{id:"amount",type:"number",placeholder:"0",value:et.amount,onChange:e=>es(t=>({...t,amount:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C.J,{htmlFor:"category",children:"Kategori"}),(0,a.jsxs)(h.l6,{value:et.category,onValueChange:e=>es(t=>({...t,category:e})),children:[(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{})}),(0,a.jsxs)(h.gC,{children:[(0,a.jsx)(h.eb,{value:"Maaş",children:"Maaş"}),(0,a.jsx)(h.eb,{value:"Serbest",children:"Serbest \xc7alışma"}),(0,a.jsx)(h.eb,{value:"Kira",children:"Kira Geliri"}),(0,a.jsx)(h.eb,{value:"Yatırım",children:"Yatırım Geliri"}),(0,a.jsx)(h.eb,{value:"Diğer",children:"Diğer"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"active",checked:et.active,onChange:e=>es(t=>({...t,active:e.target.checked})),className:"rounded"}),(0,a.jsx)(C.J,{htmlFor:"active",children:"Aktif"})]})]}),(0,a.jsxs)(d.Es,{children:[(0,a.jsx)(i.$,{variant:"outline",onClick:()=>q(!1),children:"İptal"}),(0,a.jsx)(i.$,{onClick:async()=>{try{if(!et.description.trim()||!et.amount){e({title:"Hata",description:"L\xfctfen t\xfcm alanları doldurun.",variant:"destructive"});return}let s={id:null==D?void 0:D.id,description:et.description.trim(),amount:Number(et.amount),category:et.category,active:et.active,nextDate:new Date().toISOString().split("T")[0]};if((null==t?void 0:t.uid)&&(0,O.T1)()){await (0,O.UI)(null==t?void 0:t.uid,s);let a=await (0,O.Si)(null==t?void 0:t.uid);j(a||[]),e({title:"Başarılı",description:D?"Tekrarlı gelir g\xfcncellendi.":"Tekrarlı gelir eklendi."})}q(!1),B(null),es({description:"",amount:"",category:"Maaş",active:!0})}catch(t){console.error("Failed to save recurring income:",t),e({title:"Hata",description:"Kaydetme sırasında bir hata oluştu.",variant:"destructive"})}},children:D?"G\xfcncelle":"Kaydet"})]})]})}),(0,a.jsx)(H,{onAddIncome:()=>{w("gelir"),b(!0)},onAddExpense:()=>{w("gider"),b(!0)}}),(0,a.jsx)("div",{className:"hidden",id:"apk-download-section",children:(0,a.jsx)("div",{className:"hidden lg:block",children:(0,a.jsx)(eo,{})})}),(0,a.jsx)("div",{className:"hidden",id:"mobile-apk-button",children:(0,a.jsx)("div",{className:"fixed bottom-20 right-4 z-40",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-end",children:[(0,a.jsx)(i.$,{onClick:()=>tr(!0),size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-xl border-0 h-14 w-14 rounded-full",children:(0,a.jsx)(eu.A,{className:"h-6 w-6"})}),(0,a.jsx)("div",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full animate-pulse",children:"\uD83D\uDCF1 APK"})]})})}),(0,a.jsx)(ep,{isOpen:ta,onClose:()=>tr(!1)}),(0,a.jsx)(ej.PWAInstallBanner,{})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9081,8609,9696,1760,6788,6108,9176,5438,365,617,6739,8170,9170,8283,9546,5722,8637,7358],()=>t(21292)),_N_E=e.O()}]);