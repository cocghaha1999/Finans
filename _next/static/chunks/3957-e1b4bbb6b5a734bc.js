"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3957],{2036:(e,t,a)=>{a.d(t,{AT:()=>o,E$:()=>l});var i=a(18821),n=a(50654);let o={enabled:!0,billReminders:!0,budgetAlerts:!0,paymentReminders:!0,lowBalanceAlerts:!0,monthlyReports:!0,goalNotifications:!0,transactionAlerts:!0,calendarNotifications:!0,calendarDailyReminder:!0,calendarEventReminder:!0,reminderDaysBefore:3,lowBalanceThreshold:100,browserNotifications:!0,emailNotifications:!1,pageNotifications:{home:!0,budgets:!0,kartlarim:!0,odemeler:!0,yatirimlar:!0,notifications:!0}},r={bill_due:e=>({title:"\uD83D\uDCB3 Fatura Vadesi Yaklaşıyor",message:"".concat(e.billName," faturanızın vadesi ").concat(e.daysLeft," g\xfcn sonra (").concat(e.dueDate,"). Tutar: ").concat(e.amount)}),budget_exceeded:e=>({title:"⚠️ B\xfct\xe7e Aşımı",message:"".concat(e.category," kategorisinde b\xfct\xe7enizi %").concat(e.percentage," aştınız. Harcama: ").concat(e.spent,"/").concat(e.budget)}),payment_reminder:e=>{var t,a,i;return{title:e.isToday?"\uD83D\uDCB0 \xd6deme Tarihi Geldi!":"\uD83D\uDCB0 \xd6deme Hatırlatıcısı",message:e.isToday?"".concat(e.paymentName," \xf6demesi bug\xfcn vadesi geliyor! Tutar: ₺").concat(null===(t=e.amount)||void 0===t?void 0:t.toLocaleString("tr-TR")):e.isReminder?"".concat(e.paymentName," \xf6demesi yarın vadesi geliyor. Tutar: ₺").concat(null===(a=e.amount)||void 0===a?void 0:a.toLocaleString("tr-TR")):"".concat(e.paymentName," \xf6demesi i\xe7in ₺").concat(null===(i=e.amount)||void 0===i?void 0:i.toLocaleString("tr-TR")," \xf6demeniz gerekiyor.")}},low_balance:e=>({title:"\uD83D\uDCB3 D\xfcş\xfck Bakiye Uyarısı",message:"".concat(e.accountName," hesabınızda sadece ").concat(e.balance," kaldı.")}),monthly_report:e=>({title:"\uD83D\uDCCA Aylık Finansal Rapor",message:"".concat(e.month," ayı raporunuz hazır! Toplam harcama: ").concat(e.totalExpense,", Gelir: ").concat(e.totalIncome)}),goal_reached:e=>({title:"\uD83C\uDFAF Hedef Tamamlandı!",message:'"'.concat(e.goalName,'" hedefinizi başarıyla tamamladınız! \uD83C\uDF89')}),transaction_alert:e=>({title:"\uD83D\uDCB8 İşlem Bildirimi",message:"".concat(e.amount," tutarında ").concat("income"===e.type?"gelir":"gider"," eklendi: ").concat(e.description)}),calendar_daily:e=>({title:"\uD83D\uDCC5 G\xfcnl\xfck Takvim Hatırlatıcısı",message:"Bug\xfcn ".concat(e.eventCount||0," etkinliğiniz var. ").concat(e.hasImportantEvents?"\xd6nemli \xf6demelerinizi kontrol edin!":"")}),calendar_event:e=>({title:"\uD83D\uDCC5 ".concat("payment"===e.eventType?"\uD83D\uDCB0":"income"===e.eventType?"\uD83D\uDC9A":"\uD83D\uDCDD"," Takvim Etkinliği"),message:"".concat(e.title||"Etkinlik"," - ").concat(e.amount?"Tutar: ".concat(e.amount):""," ").concat(e.description||"")}),calendar_summary:e=>({title:"\uD83D\uDCCA Takvim \xd6zeti",message:"".concat(e.period||"Bu hafta"," ").concat(e.totalEvents||0," etkinlik, ").concat(e.totalAmount?"toplam: ".concat(e.totalAmount):"")})};class s{static getInstance(){return s.instance||(s.instance=new s),s.instance}async checkPermission(){return"Notification"in window?Notification.permission:"denied"}async requestPermission(){return"Notification"in window&&"granted"===await Notification.requestPermission()}async sendBrowserNotification(e){if("granted"!==await this.checkPermission())return;let t=new Notification(e.title,{body:e.message,icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png",tag:e.type,requireInteraction:"high"===e.priority,data:e.data});t.onclick=()=>{window.focus(),t.close(),this.handleNotificationClick(e)},"high"!==e.priority&&setTimeout(()=>{t.close()},1e4)}handleNotificationClick(e){switch(e.type){case"bill_due":case"payment_reminder":window.location.href="/odemeler";break;case"budget_exceeded":window.location.href="/budgets";break;case"low_balance":window.location.href="/kartlarim";break;case"monthly_report":default:window.location.href="/";break;case"calendar_daily":case"calendar_event":case"calendar_summary":window.postMessage({type:"OPEN_CALENDAR"},"*")}}checkScheduledNotifications(){let e=new Date;this.getStoredNotifications().filter(t=>t.scheduledFor&&t.scheduledFor<=e&&!t.read).forEach(e=>{this.sendBrowserNotification(e)})}createNotification(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"medium",i=arguments.length>3?arguments[3]:void 0,n=r[e](t),o={id:"notification_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),type:e,title:n.title,message:n.message,data:t,read:!1,createdAt:new Date,scheduledFor:i,priority:a};return this.storeNotification(o),(!i||i<=new Date)&&this.sendBrowserNotification(o),o}storeNotification(e){let t=this.getStoredNotifications();t.push(e),localStorage.setItem("costik-notifications",JSON.stringify(t))}getStoredNotifications(){let e=localStorage.getItem("costik-notifications");if(!e)return[];try{return(0,i.jD)(e,[]).map(e=>({...e,createdAt:new Date(e.createdAt),scheduledFor:e.scheduledFor?new Date(e.scheduledFor):void 0})).sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime())}catch(e){return[]}}markAsRead(e){let t=this.getStoredNotifications(),a=t.find(t=>t.id===e);a&&(a.read=!0,localStorage.setItem("costik-notifications",JSON.stringify(t)))}markAllAsRead(){let e=this.getStoredNotifications();e.forEach(e=>e.read=!0),localStorage.setItem("costik-notifications",JSON.stringify(e))}deleteNotification(e){let t=this.getStoredNotifications().filter(t=>t.id!==e);localStorage.setItem("costik-notifications",JSON.stringify(t))}cleanupOldNotifications(){let e=new Date(Date.now()-2592e6),t=this.getStoredNotifications().filter(t=>t.createdAt>=e);localStorage.setItem("costik-notifications",JSON.stringify(t))}getUnreadCount(){return this.getStoredNotifications().filter(e=>!e.read).length}createCalendarDailyReminder(e,t){let a=t.length,i=t.some(e=>"payment"===e.type||"bill_due"===e.type);return this.createNotification("calendar_daily",{date:e.toISOString(),eventCount:a,hasImportantEvents:i,events:t},i?"high":"medium")}createCalendarEventNotification(e,t){return this.createNotification("calendar_event",{title:e.description||e.title,eventType:e.type,amount:e.amount,description:e.description,date:e.date,category:e.category},"payment"===e.type?"high":"medium",t)}createCalendarSummary(e,t,a){return this.createNotification("calendar_summary",{period:e,totalEvents:t.length,totalAmount:a,events:t},"low")}checkDailyCalendarEvents(e){let t=this.getNotificationSettings();if(!t.calendarNotifications||!t.calendarDailyReminder)return;let a=new Date,i=e.filter(e=>new Date(e.date).toDateString()===a.toDateString());i.length>0&&this.createCalendarDailyReminder(a,i)}checkPastCalendarEvents(e){if(!this.getNotificationSettings().calendarNotifications)return;let t=new Date(new Date);t.setDate(t.getDate()-1),e.filter(e=>new Date(e.date).toDateString()===t.toDateString()&&("payment"===e.type||"bill_due"===e.type)).forEach(e=>{this.hasNotificationForEvent(e)||this.createCalendarEventNotification(e)})}hasNotificationForEvent(e){return this.getStoredNotifications().some(t=>{var a,i;return"calendar_event"===t.type&&(null===(a=t.data)||void 0===a?void 0:a.date)===e.date&&(null===(i=t.data)||void 0===i?void 0:i.title)===e.title})}isPageNotificationEnabled(e){var t;return null===(t=this.getNotificationSettings().pageNotifications[e])||void 0===t||t}getNotificationSettings(){let e=localStorage.getItem("notification-settings");if(e)try{return JSON.parse(e)}catch(e){}return o}updatePageNotificationSetting(e,t){let a=this.getNotificationSettings();a.pageNotifications&&(a.pageNotifications[e]=t,localStorage.setItem("notification-settings",JSON.stringify(a)))}schedulePaymentNotification(e){if(!e.dueDate)return;let t=new Date(e.dueDate),a=new Date;if(t<a)return;let i=new Date(t);if(i.setHours(12,0,0,0),i>a){let t=i.getTime()-a.getTime();t<=864e5&&setTimeout(()=>{if(this.createNotification("payment_reminder",{paymentName:e.name,amount:e.amount,dueDate:e.dueDate,isToday:!0},"high"),"granted"===Notification.permission){var t;new Notification("\uD83D\uDCB0 \xd6deme Hatırlatıcısı",{body:"".concat(e.name," \xf6demesi bug\xfcn vadesi geliyor! Tutar: ₺").concat(null===(t=e.amount)||void 0===t?void 0:t.toLocaleString("tr-TR")),icon:"/icons/icon-192x192.png"})}},t)}let n=new Date(t);if(n.setDate(n.getDate()-1),n.setHours(12,0,0,0),n>a){let t=n.getTime()-a.getTime();t<=864e5&&setTimeout(()=>{this.createNotification("payment_reminder",{paymentName:e.name,amount:e.amount,dueDate:e.dueDate,isReminder:!0},"medium")},t)}}scheduleAllPaymentNotifications(e){e.filter(e=>"pending"===e.status&&e.dueDate).forEach(e=>{this.schedulePaymentNotification(e)})}createTestPaymentNotification(e){if(this.createNotification("payment_reminder",{paymentName:e.name,amount:e.amount,dueDate:e.dueDate,isToday:!0},"high"),"granted"===Notification.permission){var t;new Notification("\uD83D\uDCB0 Test \xd6deme Hatırlatıcısı",{body:"".concat(e.name," \xf6demesi test bildirimi! Tutar: ₺").concat(null===(t=e.amount)||void 0===t?void 0:t.toLocaleString("tr-TR")),icon:"/icons/icon-192x192.png"})}}}let l=()=>{let e=(0,n.useMemo)(()=>s.getInstance(),[]);return(0,n.useMemo)(()=>({createNotification:e.createNotification.bind(e),getNotifications:e.getStoredNotifications.bind(e),markAsRead:e.markAsRead.bind(e),markAllAsRead:e.markAllAsRead.bind(e),deleteNotification:e.deleteNotification.bind(e),getUnreadCount:e.getUnreadCount.bind(e),requestPermission:e.requestPermission.bind(e),checkPermission:e.checkPermission.bind(e),createCalendarDailyReminder:e.createCalendarDailyReminder.bind(e),createCalendarEventNotification:e.createCalendarEventNotification.bind(e),createCalendarSummary:e.createCalendarSummary.bind(e),checkDailyCalendarEvents:e.checkDailyCalendarEvents.bind(e),checkPastCalendarEvents:e.checkPastCalendarEvents.bind(e),isPageNotificationEnabled:e.isPageNotificationEnabled.bind(e),updatePageNotificationSetting:e.updatePageNotificationSetting.bind(e),getNotificationSettings:e.getNotificationSettings.bind(e),schedulePaymentNotification:e.schedulePaymentNotification.bind(e),scheduleAllPaymentNotifications:e.scheduleAllPaymentNotifications.bind(e),createTestPaymentNotification:e.createTestPaymentNotification.bind(e)}),[e])}},30334:(e,t,a)=>{a.d(t,{p:()=>o});var i=a(86286);a(50654);var n=a(18821);function o(e){let{className:t,type:a,...o}=e,r=Object.prototype.hasOwnProperty.call(o,"value"),{value:s,defaultValue:l,...c}=o;return(0,i.jsx)("input",{type:a,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r?{value:null!=s?s:""}:{defaultValue:l},...c})}},41188:(e,t,a)=>{a.d(t,{J:()=>r});var i=a(86286);a(50654);var n=a(50381),o=a(18821);function r(e){let{className:t,...a}=e;return(0,i.jsx)(n.b,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},49846:(e,t,a)=>{a.d(t,{Xi:()=>l,av:()=>c,j7:()=>s,tU:()=>r});var i=a(86286);a(50654);var n=a(37196),o=a(18821);function r(e){let{className:t,...a}=e;return(0,i.jsx)(n.bL,{"data-slot":"tabs",className:(0,o.cn)("flex flex-col gap-2",t),...a})}function s(e){let{className:t,...a}=e;return(0,i.jsx)(n.B8,{"data-slot":"tabs-list",className:(0,o.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function l(e){let{className:t,...a}=e;return(0,i.jsx)(n.l9,{"data-slot":"tabs-trigger",className:(0,o.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function c(e){let{className:t,...a}=e;return(0,i.jsx)(n.UC,{"data-slot":"tabs-content",className:(0,o.cn)("flex-1 outline-none",t),...a})}},61498:(e,t,a)=>{a.d(t,{bq:()=>u,eb:()=>g,gC:()=>m,l6:()=>c,yv:()=>d});var i=a(86286);a(50654);var n=a(40032),o=a(86597),r=a(2585),s=a(84763),l=a(18821);function c(e){let{...t}=e;return(0,i.jsx)(n.bL,{"data-slot":"select",...t})}function d(e){let{...t}=e;return(0,i.jsx)(n.WT,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:a="default",children:r,...s}=e;return(0,i.jsxs)(n.l9,{"data-slot":"select-trigger","data-size":a,className:(0,l.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s,children:[r,(0,i.jsx)(n.In,{asChild:!0,children:(0,i.jsx)(o.A,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:a,position:o="popper",...r}=e;return(0,i.jsx)(n.ZL,{children:(0,i.jsxs)(n.UC,{"data-slot":"select-content",className:(0,l.cn)("bg-popover text-popover-foreground relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:o,...r,children:[(0,i.jsx)(f,{}),(0,i.jsx)(n.LM,{className:(0,l.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,i.jsx)(p,{})]})})}function g(e){let{className:t,children:a,...o}=e;return(0,i.jsxs)(n.q7,{"data-slot":"select-item",className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...o,children:[(0,i.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,i.jsx)(n.VF,{children:(0,i.jsx)(r.A,{className:"size-4"})})}),(0,i.jsx)(n.p4,{children:a})]})}function f(e){let{className:t,...a}=e;return(0,i.jsx)(n.PP,{"data-slot":"select-scroll-up-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,i.jsx)(s.A,{className:"size-4"})})}function p(e){let{className:t,...a}=e;return(0,i.jsx)(n.wn,{"data-slot":"select-scroll-down-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,i.jsx)(o.A,{className:"size-4"})})}},78320:(e,t,a)=>{a.d(t,{S:()=>s,_:()=>l});var i=a(86286),n=a(50654),o=a(2036);let r=(0,n.createContext)(void 0);function s(e){let{children:t}=e,[a,s]=(0,n.useState)(!1),[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0),{checkDailyCalendarEvents:m,checkPastCalendarEvents:g,createCalendarEventNotification:f,getNotificationSettings:p}=(0,o.E$)();return(0,n.useEffect)(()=>{u(p().calendarNotifications)},[p]),(0,n.useEffect)(()=>{d&&l.length>0&&(m(l),g(l))},[l,d,m,g]),(0,i.jsx)(r.Provider,{value:{isCalendarOpen:a,openCalendar:e=>{e&&c(e),s(!0);let t=e=>{"OPEN_CALENDAR"===e.data.type&&s(!0)};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}},closeCalendar:()=>{s(!1)},highlightedDates:l,setHighlightedDates:c,notificationsEnabled:d,setNotificationsEnabled:u,addCalendarEvent:e=>{c(t=>[...t,e]),d&&f({title:e.title||e.description,type:e.type,amount:e.amount,description:e.description,date:e.date.toISOString(),category:e.category})},removeCalendarEvent:e=>{c(t=>t.filter(t=>t.id!==e))}},children:t})}function l(){let e=(0,n.useContext)(r);if(void 0===e)throw Error("useCalendar must be used within a CalendarProvider");return e}},99426:(e,t,a)=>{a.d(t,{Cf:()=>m,Es:()=>f,HM:()=>d,L3:()=>p,c7:()=>g,lG:()=>s,rr:()=>h,zM:()=>l});var i=a(86286);a(50654);var n=a(66757),o=a(50161),r=a(18821);function s(e){let{...t}=e;return(0,i.jsx)(n.bL,{"data-slot":"dialog",...t})}function l(e){let{...t}=e;return(0,i.jsx)(n.l9,{"data-slot":"dialog-trigger",...t})}function c(e){let{...t}=e;return(0,i.jsx)(n.ZL,{"data-slot":"dialog-portal",...t})}function d(e){let{...t}=e;return(0,i.jsx)(n.bm,{"data-slot":"dialog-close",...t})}function u(e){let{className:t,...a}=e;return(0,i.jsx)(n.hJ,{"data-slot":"dialog-overlay",className:(0,r.cn)("fixed inset-0 z-50 bg-black/50",t),...a})}function m(e){let{className:t,children:a,showCloseButton:s=!0,...l}=e;return(0,i.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,i.jsx)(u,{}),(0,i.jsxs)(n.UC,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg sm:max-w-lg max-h-[calc(100dvh-2rem)] overflow-y-auto",t),...l,children:[a,s&&(0,i.jsxs)(n.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,i.jsx)(o.A,{}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function g(e){let{className:t,...a}=e;return(0,i.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function f(e){let{className:t,...a}=e;return(0,i.jsx)("div",{"data-slot":"dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function p(e){let{className:t,...a}=e;return(0,i.jsx)(n.hE,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",t),...a})}function h(e){let{className:t,...a}=e;return(0,i.jsx)(n.VY,{"data-slot":"dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}}}]);