(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5030],{37843:(e,s,a)=>{Promise.resolve().then(a.bind(a,65e3))},65e3:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ea});var t=a(86286),l=a(73679),i=a(50654),r=a(27484),n=a(37942),d=a(71751),c=a(36883),m=a(29995),x=a(80859),o=a(48427),u=a(57416),h=a(4268),p=a(84640),j=a(64314),g=a(77774),v=a(51401),N=a(63418),f=a(78014),b=a(92686),k=a(74216),y=a(7800),w=a(22359),C=a(61328),A=a(48738),D=a(86157),z=a(66033),S=a(35195),T=a(55654),K=a(94875),L=a(77857),E=a(24749),$=a(173),H=a(32132),M=a(40127),G=a(99426),U=a(30334),B=a(41188),F=a(61498),J=a(46638),Y=a(32017),P=a(38170),O=a(18821);function Z(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"skeleton",className:(0,O.cn)("bg-accent animate-pulse rounded-md",s),...a})}var I=a(98709);function V(e){let{...s}=e;return(0,t.jsx)(I.bL,{"data-slot":"dropdown-menu",...s})}function _(e){let{...s}=e;return(0,t.jsx)(I.l9,{"data-slot":"dropdown-menu-trigger",...s})}function q(e){let{className:s,sideOffset:a=4,...l}=e;return(0,t.jsx)(I.ZL,{children:(0,t.jsx)(I.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,O.cn)("bg-popover text-popover-foreground z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",s),...l})})}function W(e){let{className:s,inset:a,variant:l="default",...i}=e;return(0,t.jsx)(I.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":l,className:(0,O.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...i})}var X=a(53863),Q=a(49846),R=a(33285),ee=a(77007),es=a(78320);function ea(){var e;let{openCalendar:s,addCalendarEvent:a}=(0,es._)(),[I,ea]=(0,i.useState)([]),[et,el]=(0,i.useState)({}),[ei,er]=(0,i.useState)([]),[en,ed]=(0,i.useState)(!0),[ec,em]=(0,i.useState)(!0),[ex,eo]=(0,i.useState)(!1),[eu,eh]=(0,i.useState)(null),[ep,ej]=(0,i.useState)(!1),[eg,ev]=(0,i.useState)(""),[eN,ef]=(0,i.useState)(null),[eb,ek]=(0,i.useState)(!1),[ey,ew]=(0,i.useState)(null),[eC,eA]=(0,i.useState)(null),[eD,ez]=(0,i.useState)(""),[eS,eT]=(0,i.useState)(""),[eK,eL]=(0,i.useState)(null),[eE,e$]=(0,i.useState)(""),[eH,eM]=(0,i.useState)(""),[eG,eU]=(0,i.useState)(new Date().toISOString().slice(0,10)),[eB,eF]=(0,i.useState)(!1),[eJ,eY]=(0,i.useState)(!1),[eP,eO]=(0,i.useState)(""),[eZ,eI]=(0,i.useState)(""),[eV,e_]=(0,i.useState)(""),[eq,eW]=(0,i.useState)(""),[eX,eQ]=(0,i.useState)(""),[eR,e0]=(0,i.useState)(!1),[e4,e2]=(0,i.useState)("grid"),[e1,e5]=(0,i.useState)(!0),[e3,e6]=(0,i.useState)("all"),[e8,e7]=(0,i.useState)("name"),{toast:e9}=(0,J.dj)(),[se,ss]=(0,i.useState)("aktif"),sa=e=>{if(!e)return!1;let s=new Date(e);if(isNaN(s.getTime()))return!1;let a=new Date;return s.getFullYear()===a.getFullYear()&&s.getMonth()===a.getMonth()},st=(0,i.useMemo)(()=>I.flatMap(e=>(e.installmentPlans||[]).map(s=>({card:e,p:s}))),[I]),sl=(0,i.useMemo)(()=>st.filter(e=>{let{p:s}=e;return(s.remaining||0)>0}),[st]),si=(0,i.useMemo)(()=>sl.filter(e=>{let{p:s}=e;return sa(s.nextDate||void 0)}),[sl]),sr=(0,i.useMemo)(()=>st.filter(e=>{let{p:s}=e;return 0>=(s.remaining||0)}),[st]);(0,i.useEffect)(()=>{let e=()=>ed(!0),s=()=>ed(!1);return window.addEventListener("online",e),window.addEventListener("offline",s),ed(navigator.onLine),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}},[]),(0,i.useEffect)(()=>{let e=null===Y.auth||void 0===Y.auth?void 0:Y.auth.currentUser;if(e&&(0,P.T1)()){let s=(0,P.hj)(e.uid,e=>{ea(e),em(!1)}),a=(0,P.Jm)(e.uid,er);return(0,P.gN)(e.uid).then(ea).finally(()=>em(!1)),(0,P.QR)(e.uid).then(er),()=>{null==s||s(),null==a||a()}}try{let e=localStorage.getItem("cards");e&&ea((0,O.jD)(e,[]))}catch(e){}em(!1)},[]);let sn=(0,i.useMemo)(()=>I.reduce((e,s)=>e+(s.currentDebt||0),0),[I]),sd=(0,i.useMemo)(()=>I.reduce((e,s)=>e+(s.creditLimit||0),0),[I]),sc=(0,i.useMemo)(()=>{let e=I;return"credit"===e3?e=e.filter(e=>(e.cardType||"").toLowerCase().includes("kredi")):"debit"===e3&&(e=e.filter(e=>(e.cardType||"").toLowerCase().includes("debit")||(e.cardType||"").toLowerCase().includes("vadesiz"))),e.sort((e,s)=>{switch(e8){case"name":return(e.nickname||e.bankName||"").localeCompare(s.nickname||s.bankName||"");case"usage":let a=(e.currentDebt||0)/(e.creditLimit||1);return(s.currentDebt||0)/(s.creditLimit||1)-a;case"debt":return(s.currentDebt||0)-(e.currentDebt||0);case"limit":return(s.creditLimit||0)-(e.creditLimit||0);default:return 0}})},[I,e3,e8]),sm=(0,i.useMemo)(()=>{let e=I.length,s=I.filter(e=>(e.cardType||"").toLowerCase().includes("kredi")).length,a=I.filter(e=>(e.cardType||"").toLowerCase().includes("debit")||(e.cardType||"").toLowerCase().includes("vadesiz")).length;return{totalCards:e,creditCards:s,debitCards:a,highUsageCards:I.filter(e=>(e.currentDebt||0)/(e.creditLimit||1)>.8).length,overdueCards:I.filter(e=>{let s=e.paymentDueDate||"";if(!s)return!1;let a=parseInt(s);if(isNaN(a))return!1;let t=new Date;return new Date(t.getFullYear(),t.getMonth(),a)<t&&(e.currentDebt||0)>0}).length,averageUsage:sd>0?sn/sd*100:0}},[I,sn,sd]),sx=async e=>{let s=null===Y.auth||void 0===Y.auth?void 0:Y.auth.currentUser;if(!s){e9({title:"Hata",description:"Giriş yapmalısınız.",variant:"destructive"});return}try{await (0,P.upsertCard)(s.uid,e),e9({title:"Başarılı",description:"Kart bilgileri kaydedildi."}),eo(!1),eh(null)}catch(e){console.error("Kart kaydedilemedi:",e),e9({title:"Hata",description:"Kart kaydedilemedi.",variant:"destructive"})}},so=async e=>{let s=null===Y.auth||void 0===Y.auth?void 0:Y.auth.currentUser;if(s)try{await (0,P.removeCard)(s.uid,e),e9({title:"Başarılı",description:"Kart silindi."})}catch(e){console.error("Kart silinemedi:",e),e9({title:"Hata",description:"Kart silinemedi.",variant:"destructive"})}},su=e=>{ef(e),ev((e.minimumPayment||e.currentDebt||0).toString()),ej(!0)},sh=async e=>{let s=null===Y.auth||void 0===Y.auth?void 0:Y.auth.currentUser;if(s&&eN){if(isNaN(e)||e<=0){e9({title:"Ge\xe7ersiz tutar",variant:"destructive"});return}try{let a={id:crypto.randomUUID(),date:new Date().toISOString().split("T")[0],amount:e,type:"gider",category:"Kredi Kartı \xd6demesi",description:"".concat(eN.nickname||eN.bankName," \xf6demesi")};await (0,P.addTransaction)(s.uid,a);let t=(e,s)=>{let a=new Date(e);if(isNaN(a.getTime()))return e;let t=a.getFullYear(),l=a.getMonth()+s,i=a.getDate(),r=new Date(t,l+1,0),n=Math.min(i,r.getDate());return new Date(t,l,n).toISOString().slice(0,10)},l=Array.isArray(eN.installmentPlans)?eN.installmentPlans:[],i=l.map(e=>{if(0>=(e.remaining||0))return e;let s=(e.posted||0)+1,a=Math.max(0,(e.remaining||0)-1),l=e.nextDate||null;return a<=0?l=null:e.nextDate?l=t(e.nextDate,1):e.startDate&&(l=t(e.startDate,s)),{...e,posted:s,remaining:a,nextDate:l}}),r={...eN,currentDebt:(eN.currentDebt||0)-e,installmentPlans:i};await (0,P.upsertCard)(s.uid,r);let n=l.filter(e=>(e.remaining||0)>0).length,d=eN.nickname||eN.bankName;await (0,P.z8)(s.uid,{message:"".concat(d," kartına ").concat((0,O.tn)(e)," \xf6deme yapıldı")+(n>0?" • ".concat(n," taksit 1 ay ilerletildi"):""),read:!1,timestamp:Date.now(),type:"payment"}),e9({title:"\xd6deme Başarılı",description:"".concat((0,O.tn)(e)," \xf6dendi.")}),ej(!1),ef(null),ev("")}catch(e){console.error("\xd6deme hatası:",e),e9({title:"\xd6deme Başarısız",variant:"destructive"})}}},sp=e=>{ew(e),ek(!0),e$(""),eM(""),eU(new Date().toISOString().slice(0,10)),(async()=>{let s=null===Y.auth||void 0===Y.auth?void 0:Y.auth.currentUser;if(s&&e.id)try{let a=await (0,P.hc)(s.uid,e.id);el(s=>({...s,[e.id]:a}))}catch(e){}})()},sj=e=>{eO((null==e?void 0:e.id)||""),eI(""),e_(""),eW(""),eQ(""),eY(!0)},sg=async()=>{let e=null===Y.auth||void 0===Y.auth?void 0:Y.auth.currentUser;if(!e||!ey){e9({title:"Hata",description:"Giriş yapın ve bir kart se\xe7in.",variant:"destructive"});return}let s=Number(String(eE||"").trim().replace(/\./g,"").replace(",","."));if(!isFinite(s)||s<=0){e9({title:"Ge\xe7ersiz tutar",description:"Pozitif bir tutar girin.",variant:"destructive"});return}let t=eG||new Date().toISOString().slice(0,10);try{let l=await (0,P.A6)(e.uid,ey.id,{cardId:ey.id,type:"harcama",amount:s,description:eH||"Kart harcaması",date:t}),i={...ey,currentDebt:(ey.currentDebt||0)+s};await (0,P.upsertCard)(e.uid,i),e9({title:"Harcama eklendi",description:"".concat(i.nickname||i.bankName,": ").concat((0,O.tn)(s))}),a({date:new Date(t),type:"expense",description:"".concat(eH||"Kart harcaması"," • ₺").concat(s.toLocaleString("tr-TR")),amount:s,title:eH||"Kart harcaması",category:"Kart Harcaması"}),ew(i),ea(e=>e.map(e=>e.id===i.id?i:e)),el(e=>({...e,[ey.id]:[{id:String(l),cardId:ey.id,type:"harcama",amount:s,description:eH||"Kart harcaması",date:t,createdAt:new Date().toISOString()},...e[ey.id]||[]]})),e$(""),eM("")}catch(e){console.error(e),e9({title:"Hata",description:"Harcama eklenemedi.",variant:"destructive"})}},sv=async()=>{let e=null===Y.auth||void 0===Y.auth?void 0:Y.auth.currentUser;if(!e){e9({title:"Hata",description:"Giriş yapmalısınız.",variant:"destructive"});return}let s=I.find(e=>e.id===eP);if(!s){e9({title:"Hata",description:"L\xfctfen bir kart se\xe7in.",variant:"destructive"});return}let a=Number(String(eV).trim().replace(/\./g,"").replace(",",".")),t=Number(eq);if(!isFinite(a)||a<=0||!isFinite(t)||t<=0||!eX){e9({title:"Eksik/Ge\xe7ersiz",description:"T\xfcm alanları doğru doldurun.",variant:"destructive"});return}let l=Math.round(a/t*100)/100,i={id:crypto.randomUUID(),description:eZ||"Taksitli Harcama",total:a,monthlyAmount:l,remaining:t,posted:0,startDate:eX,nextDate:eX},r=Array.isArray(s.installmentPlans)?s.installmentPlans:[],n={...s,installmentPlans:[...r,i]};try{await (0,P.upsertCard)(e.uid,n),e9({title:"Taksit Eklendi",description:"".concat(s.nickname||s.bankName," i\xe7in ").concat(t," ay • ").concat((0,O.tn)(l))}),eY(!1)}catch(e){console.error(e),e9({title:"Hata",description:"Taksit eklenemedi.",variant:"destructive"})}};return ec?(0,t.jsx)("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6",children:[(0,t.jsx)(Z,{className:"h-40 sm:h-52 w-full"}),(0,t.jsx)(Z,{className:"h-40 sm:h-52 w-full"}),(0,t.jsx)(Z,{className:"h-40 sm:h-52 w-full"})]})}):(0,t.jsx)(M.q_,{children:(0,t.jsx)("div",{className:"min-h-screen bg-background",children:(0,t.jsxs)("main",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8",children:[(0,t.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground flex items-center gap-2 sm:gap-3",children:[(0,t.jsx)(c.A,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary"}),"Kartlarım"]}),(0,t.jsx)("p",{className:"text-muted-foreground text-xs sm:text-sm mt-1",children:"Kredi kartlarınızı akıllıca y\xf6netin ve takip edin."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>eF(!0),className:"text-xs px-2 py-1",children:[(0,t.jsx)(m.A,{className:"mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Taksitlerim"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Taksit"})]}),(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>e0(!0),className:"text-xs px-2 py-1",children:[(0,t.jsx)(x.A,{className:"mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Abonelikler"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Abone"})]}),(0,t.jsxs)(n.$,{onClick:()=>{eh({}),eo(!0)},size:"sm",className:"text-xs px-2 py-1",children:[(0,t.jsx)(o.A,{className:"mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Yeni Kart"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Ekle"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-2 sm:gap-4 mb-4 sm:mb-6",children:[(0,t.jsx)(r.Zp,{className:"p-2 sm:p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,t.jsx)(c.A,{className:"h-3 w-3 sm:h-5 sm:w-5 text-blue-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Toplam"}),(0,t.jsx)("p",{className:"text-sm sm:text-lg font-bold",children:sm.totalCards})]})]})}),(0,t.jsx)(r.Zp,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-5 w-5 text-green-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Kullanım"}),(0,t.jsxs)("p",{className:"text-lg font-bold",children:[sm.averageUsage.toFixed(0),"%"]})]})]})}),(0,t.jsx)(r.Zp,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"h-5 w-5 text-yellow-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Y\xfcksek"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:sm.highUsageCards})]})]})}),(0,t.jsx)(r.Zp,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"h-5 w-5 text-red-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Vadeli"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:sm.overdueCards})]})]})}),(0,t.jsx)(r.Zp,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(j.A,{className:"h-5 w-5 text-purple-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Kredi"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:sm.creditCards})]})]})}),(0,t.jsx)(r.Zp,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"h-5 w-5 text-indigo-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Vadesiz"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:sm.debitCards})]})]})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6 p-4 bg-muted/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.A,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsxs)("select",{value:e3,onChange:e=>e6(e.target.value),className:"text-sm border rounded px-2 py-1 bg-background",children:[(0,t.jsx)("option",{value:"all",children:"T\xfcm Kartlar"}),(0,t.jsx)("option",{value:"credit",children:"Kredi Kartları"}),(0,t.jsx)("option",{value:"debit",children:"Vadesiz Kartlar"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsxs)("select",{value:e8,onChange:e=>e7(e.target.value),className:"text-sm border rounded px-2 py-1 bg-background",children:[(0,t.jsx)("option",{value:"name",children:"İsme G\xf6re"}),(0,t.jsx)("option",{value:"usage",children:"Kullanıma G\xf6re"}),(0,t.jsx)("option",{value:"debt",children:"Borca G\xf6re"}),(0,t.jsx)("option",{value:"limit",children:"Limite G\xf6re"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.$,{variant:"grid"===e4?"default":"outline",size:"sm",onClick:()=>e2("grid"),children:(0,t.jsx)(f.A,{className:"h-4 w-4"})}),(0,t.jsx)(n.$,{variant:"list"===e4?"default":"outline",size:"sm",onClick:()=>e2("list"),children:(0,t.jsx)(b.A,{className:"h-4 w-4"})}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>e5(!e1),children:e1?(0,t.jsx)(k.A,{className:"h-4 w-4"}):(0,t.jsx)(y.A,{className:"h-4 w-4"})})]})]})]}),(0,t.jsx)("div",{className:(0,O.cn)("gap-3 sm:gap-6","grid"===e4?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"flex flex-col space-y-3 sm:space-y-4"),children:0===sc.length?(0,t.jsxs)("div",{className:"col-span-full text-center py-12 sm:py-16",children:[(0,t.jsx)(c.A,{className:"mx-auto h-8 w-8 sm:h-12 sm:w-12 text-muted-foreground"}),(0,t.jsx)("h3",{className:"mt-4 text-base sm:text-lg font-medium",children:"all"===e3?"Hen\xfcz Kredi Kartı Eklenmemiş":"Bu kategoride kart bulunamadı"}),(0,t.jsx)("p",{className:"mt-1 text-xs sm:text-sm text-muted-foreground px-4",children:"all"===e3?"İlk kredi kartınızı ekleyerek harcamalarınızı ve limitlerinizi takip etmeye başlayın.":"Farklı filtre se\xe7eneklerini deneyin veya yeni kart ekleyin."}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsxs)(n.$,{onClick:()=>eo(!0),size:"sm",children:[(0,t.jsx)(o.A,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),"all"===e3?"İlk Kartı Ekle":"Yeni Kart Ekle"]})})]}):sc.map(e=>{let s=(e.currentDebt||0)/(e.creditLimit||1)*100,a=s>80,l=(()=>{let s=e.paymentDueDate||"";if(!s)return!1;let a=parseInt(s);if(isNaN(a))return!1;let t=new Date;return new Date(t.getFullYear(),t.getMonth(),a)<t&&(e.currentDebt||0)>0})();return(0,t.jsxs)(r.Zp,{className:(0,O.cn)("overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300","grid"===e4?"flex flex-col":"flex flex-row",l&&"border-red-200 ring-2 ring-red-100",a&&!l&&"border-yellow-200 ring-2 ring-yellow-100"),children:[(0,t.jsxs)("div",{className:(0,O.cn)("text-white relative flex flex-col justify-between","grid"===e4?"p-5 h-48":"p-4 w-64",e.cardColor||"bg-gradient-to-br from-gray-700 to-gray-900"),children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm"}),(0,t.jsxs)("div",{className:"absolute top-2 left-2 z-20 flex gap-1",children:[l&&(0,t.jsxs)(d.E,{variant:"destructive",className:"text-xs px-1.5 py-0.5",children:[(0,t.jsx)(p.A,{className:"h-3 w-3 mr-1"}),"Vadeli"]}),a&&!l&&(0,t.jsxs)(d.E,{variant:"secondary",className:"text-xs px-1.5 py-0.5 bg-yellow-500 text-white",children:[(0,t.jsx)(h.A,{className:"h-3 w-3 mr-1"}),"Y\xfcksek"]}),(e.cardType||"").toLowerCase().includes("premium")&&(0,t.jsxs)(d.E,{variant:"secondary",className:"text-xs px-1.5 py-0.5 bg-purple-500 text-white",children:[(0,t.jsx)(w.A,{className:"h-3 w-3 mr-1"}),"Premium"]})]}),(0,t.jsxs)("div",{className:"relative z-10 flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-lg",children:e.nickname||e.bankName}),(0,t.jsx)("p",{className:"text-xs opacity-80",children:e.bankName}),e.cardType&&(0,t.jsx)("p",{className:"text-xs opacity-70 mt-1",children:e.cardType})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("img",{src:e.bankLogo||"/placeholder.svg?height=32&width=32",alt:e.bankName,className:"h-8 w-8 bg-white/80 rounded-md p-1"}),(0,t.jsxs)(V,{children:[(0,t.jsx)(_,{asChild:!0,children:(0,t.jsx)(n.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20",children:(0,t.jsx)(C.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(q,{align:"end",children:[(0,t.jsxs)(W,{onClick:()=>eh(e),children:[(0,t.jsx)(A.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"D\xfczenle"})]}),(0,t.jsxs)(W,{onClick:()=>sp(e),children:[(0,t.jsx)(D.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Harcamalar"})]}),(0,t.jsxs)(W,{onClick:()=>su(e),children:[(0,t.jsx)(z.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"\xd6deme Yap"})]}),(0,t.jsxs)(W,{onClick:()=>{},children:[(0,t.jsx)(S.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Taksit Hesapla"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsxs)("div",{className:"text-center mb-2",children:[(0,t.jsx)("p",{className:"text-xs opacity-80",children:"G\xfcncel Bor\xe7"}),(0,t.jsx)("p",{className:(0,O.cn)("font-bold text-2xl tracking-wider transition-all",e1?"blur-0":"blur-sm"),children:e1?(0,O.tn)(e.currentDebt||0):"₺ ****,**"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs opacity-80",children:"Kart Sahibi"}),(0,t.jsx)("p",{className:"font-medium text-sm",children:e.cardHolderName||"Bilinmiyor"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-xs opacity-80",children:"Son Kullanma"}),(0,t.jsx)("p",{className:"font-medium text-sm",children:e.expiryDate||"**/**"})]})]})]})]}),(0,t.jsxs)(r.Wu,{className:(0,O.cn)("p-4 flex-grow flex flex-col justify-between bg-card","list"===e4&&"flex-1"),children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Limit Kullanımı"}),(0,t.jsxs)("span",{className:(0,O.cn)("text-xs font-medium",a?"text-red-600":s>60?"text-yellow-600":"text-green-600"),children:[s.toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-muted rounded-full h-2.5 mb-4",children:(0,t.jsx)("div",{className:(0,O.cn)("h-2.5 rounded-full transition-all duration-500",a?"bg-red-500":s>60?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(s,100),"%")}})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(T.A,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Kalan Limit"}),(0,t.jsx)("p",{className:(0,O.cn)("font-semibold",e1?"blur-0":"blur-sm"),children:e1?(0,O.tn)((e.creditLimit||0)-(e.currentDebt||0)):"₺ ****"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(K.A,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Toplam Limit"}),(0,t.jsx)("p",{className:(0,O.cn)("font-semibold",e1?"blur-0":"blur-sm"),children:e1?(0,O.tn)(e.creditLimit||0):"₺ ****"})]})]})]}),e.paymentDueDate&&(0,t.jsxs)("div",{className:(0,O.cn)("flex items-center gap-2 text-xs p-2 rounded-md mb-3",l?"bg-red-50 text-red-700 border border-red-200":"bg-muted"),children:[(0,t.jsx)(L.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Son \xd6deme Tarihi:",(0,t.jsx)("span",{className:"font-semibold ml-1",children:e.paymentDueDate})]}),l&&(0,t.jsx)(p.A,{className:"h-4 w-4 text-red-500 ml-auto"})]}),e.minimumPayment&&e.minimumPayment>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs bg-blue-50 text-blue-700 p-2 rounded-md mb-3",children:[(0,t.jsx)(E.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Minimum \xd6deme: ",(0,t.jsx)("span",{className:"font-semibold",children:(0,O.tn)(e.minimumPayment)})]})]})]}),(0,t.jsxs)("div",{className:(0,O.cn)("gap-2 mt-4","grid"===e4?"grid grid-cols-2":"flex"),children:[(0,t.jsxs)(n.$,{size:"sm",variant:"outline",onClick:()=>sp(e),children:[(0,t.jsx)(D.A,{className:"h-4 w-4 mr-2"}),"Harcamalar"]}),(0,t.jsxs)(n.$,{size:"sm",onClick:()=>su(e),className:(0,O.cn)(l&&"bg-red-600 hover:bg-red-700"),children:[(0,t.jsx)(z.A,{className:"h-4 w-4 mr-2"}),l?"Vadeli \xd6deme":"Bor\xe7 \xd6de"]}),"list"===e4&&(0,t.jsxs)(n.$,{size:"sm",variant:"outline",onClick:()=>{},children:[(0,t.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Taksit"]})]})]})]},e.id)})}),(0,t.jsx)(ee.cj,{open:eB,onOpenChange:eF,children:(0,t.jsxs)(ee.h,{side:"right",className:"w-[95vw] sm:max-w-4xl",children:[(0,t.jsxs)(ee.Fm,{children:[(0,t.jsxs)(ee.qp,{className:"flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"h-5 w-5 text-primary"}),"Taksitlerim"]}),(0,t.jsx)(ee.Qs,{children:"Taksitli harcamalarınızı y\xf6netin ve takip edin."})]}),(0,t.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(r.Zp,{className:"bg-gradient-to-br from-blue-500/10 to-blue-500/5 border-blue-500/20",children:(0,t.jsx)(r.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:(0,t.jsx)(b.A,{className:"h-5 w-5 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aktif Taksitler"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:sl.length})]})]})})}),(0,t.jsx)(r.Zp,{className:"bg-gradient-to-br from-orange-500/10 to-orange-500/5 border-orange-500/20",children:(0,t.jsx)(r.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-orange-500/20 rounded-lg",children:(0,t.jsx)(m.A,{className:"h-5 w-5 text-orange-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Bu Ay \xd6denecek"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:si.length})]})]})})}),(0,t.jsx)(r.Zp,{className:"bg-gradient-to-br from-green-500/10 to-green-500/5 border-green-500/20",children:(0,t.jsx)(r.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-green-500/20 rounded-lg",children:(0,t.jsx)(E.A,{className:"h-5 w-5 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aylık Toplam"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:(0,O.tn)(sl.reduce((e,s)=>{let{p:a}=s;return e+a.monthlyAmount},0))})]})]})})})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-between items-start sm:items-center",children:[(0,t.jsx)(Q.tU,{value:se,onValueChange:e=>ss(e),className:"w-full sm:w-auto",children:(0,t.jsxs)(Q.j7,{className:"grid w-full grid-cols-3 sm:w-auto",children:[(0,t.jsxs)(Q.Xi,{value:"aktif",className:"flex items-center gap-2",children:[(0,t.jsx)(b.A,{className:"h-4 w-4"}),"Aktif (",sl.length,")"]}),(0,t.jsxs)(Q.Xi,{value:"buay",className:"flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),"Bu Ay (",si.length,")"]}),(0,t.jsxs)(Q.Xi,{value:"tamamlanan",className:"flex items-center gap-2",children:[(0,t.jsx)($.A,{className:"h-4 w-4"}),"Tamamlanan (",sr.length,")"]})]})}),(0,t.jsxs)(n.$,{onClick:()=>sj(null),className:"w-full sm:w-auto",children:[(0,t.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Yeni Taksit Ekle"]})]}),(0,t.jsx)("div",{className:"space-y-4",children:0===("aktif"===se?sl:"buay"===se?si:sr).length?(0,t.jsx)(r.Zp,{children:(0,t.jsxs)(r.Wu,{className:"p-8 text-center",children:[(0,t.jsx)(S.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"aktif"===se?"Aktif taksit bulunmuyor":"buay"===se?"Bu ay \xf6denecek taksit yok":"Tamamlanan taksit bulunmuyor"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"aktif"===se?"Yeni bir taksitli alışveriş ekleyebilirsiniz.":"buay"===se?"Bu ay i\xe7in \xf6deme yapılacak taksit bulunmamaktadır.":"Hen\xfcz tamamlanmış taksitiniz bulunmuyor."}),"aktif"===se&&(0,t.jsxs)(n.$,{onClick:()=>sj(null),children:[(0,t.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"İlk Taksidinizi Ekleyin"]})]})}):("aktif"===se?sl:"buay"===se?si:sr).map(e=>{let{card:s,p:a}=e,l=(a.posted||0)/((a.posted||0)+(a.remaining||0))*100,i=0>=(a.remaining||0),c=sa(a.nextDate||void 0);return(0,t.jsx)(r.Zp,{className:(0,O.cn)("transition-all hover:shadow-md",c&&"aktif"===se&&"border-orange-200 bg-orange-50/50",i&&"border-green-200 bg-green-50/50"),children:(0,t.jsx)(r.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:a.description}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(d.E,{variant:"outline",className:"text-xs",children:s.nickname||s.bankName}),c&&!i&&(0,t.jsx)(d.E,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-700",children:"Bu Ay \xd6denecek"}),i&&(0,t.jsxs)(d.E,{variant:"secondary",className:"text-xs bg-green-100 text-green-700",children:[(0,t.jsx)($.A,{className:"h-3 w-3 mr-1"}),"Tamamlandı"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:(0,O.tn)(a.monthlyAmount)}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aylık Tutar"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"İlerleme"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(X.k,{value:l,className:"flex-1"}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:[a.posted||0,"/",(a.posted||0)+(a.remaining||0)]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Kalan Tutar"}),(0,t.jsx)("p",{className:"text-lg font-semibold mt-1",children:(0,O.tn)(Math.max(0,a.remaining||0)*a.monthlyAmount)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sonraki \xd6deme"}),(0,t.jsx)("p",{className:"text-lg font-semibold mt-1",children:a.nextDate?new Date(a.nextDate).toLocaleDateString("tr-TR",{day:"numeric",month:"short",year:"numeric"}):i?"Tamamlandı":"-"})]})]})]}),(0,t.jsxs)("div",{className:"flex lg:flex-col gap-2",children:[(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>sj(s),className:"flex-1 lg:flex-none",children:[(0,t.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"D\xfczenle"]}),(0,t.jsxs)(n.$,{variant:"outline",size:"sm",className:"flex-1 lg:flex-none border-red-200 text-red-600 hover:bg-red-50",children:[(0,t.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Sil"]})]})]})})},"".concat(s.id,"-").concat(a.id))})})]})]})}),(0,t.jsx)(R.$,{open:eR,onOpenChange:e0}),(0,t.jsx)(G.lG,{open:eJ,onOpenChange:eY,children:(0,t.jsxs)(G.Cf,{className:"sm:max-w-2xl",children:[(0,t.jsxs)(G.c7,{children:[(0,t.jsxs)(G.L3,{className:"flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"h-5 w-5 text-primary"}),"Yeni Taksit Ekle"]}),(0,t.jsx)(G.rr,{children:"Taksitli alışverişinizi sisteme ekleyin. Aylık \xf6demeler otomatik olarak takip edilecek."})]}),(0,t.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.J,{className:"text-sm font-medium",children:"Kart Se\xe7imi"}),(0,t.jsxs)(F.l6,{value:eP,onValueChange:e=>eO(e),children:[(0,t.jsx)(F.bq,{className:"w-full",children:(0,t.jsx)(F.yv,{placeholder:"Taksit yapılacak kartı se\xe7in..."})}),(0,t.jsx)(F.gC,{children:I.map(e=>{let s=l.h.find(s=>s.name===e.bankName);return(0,t.jsx)(F.eb,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[s&&(0,t.jsx)("img",{src:s.logo,alt:e.bankName,className:"h-4 w-4 object-contain rounded-sm"}),(0,t.jsx)("span",{children:e.nickname||e.bankName}),(0,t.jsxs)(d.E,{variant:"outline",className:"text-xs",children:["Limit: ",(0,O.tn)(e.creditLimit||0)]})]})},e.id)})})]}),!eP&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"\xd6nce bir kart se\xe7meniz gerekiyor."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.J,{className:"text-sm font-medium",children:"Alışveriş A\xe7ıklaması"}),(0,t.jsx)(U.p,{placeholder:"\xd6rn: iPhone 15 Pro Max",value:eZ,onChange:e=>eI(e.target.value),className:"w-full"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.J,{className:"text-sm font-medium",children:"Satın Alım Tarihi"}),(0,t.jsx)(U.p,{type:"date",value:eX,onChange:e=>eQ(e.target.value),className:"w-full"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.J,{className:"text-sm font-medium",children:"Toplam Tutar (₺)"}),(0,t.jsx)(U.p,{type:"text",placeholder:"15.000,00",value:eV,onChange:e=>e_(e.target.value),className:"w-full text-lg font-semibold"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.J,{className:"text-sm font-medium",children:"Taksit Sayısı"}),(0,t.jsxs)(F.l6,{value:eq,onValueChange:eW,children:[(0,t.jsx)(F.bq,{children:(0,t.jsx)(F.yv,{placeholder:"Se\xe7in..."})}),(0,t.jsx)(F.gC,{children:[2,3,4,5,6,7,8,9,10,11,12,15,18,24,36].map(e=>(0,t.jsxs)(F.eb,{value:e.toString(),children:[e," Taksit"]},e))})]})]})]}),eV&&eq&&(0,t.jsx)(r.Zp,{className:"bg-gradient-to-r from-primary/5 to-chart-3/5 border-primary/20",children:(0,t.jsx)(r.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Toplam Tutar"}),(0,t.jsx)("p",{className:"text-xl font-bold",children:(0,O.tn)(Number(eV.replace(/\./g,"").replace(",","."))||0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aylık \xd6deme"}),(0,t.jsx)("p",{className:"text-xl font-bold text-primary",children:(0,O.tn)((Number(eV.replace(/\./g,"").replace(",","."))||0)/(Number(eq)||1))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Taksit Sayısı"}),(0,t.jsxs)("p",{className:"text-xl font-bold",children:[eq," Ay"]})]})]})})}),(0,t.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(h.A,{className:"h-5 w-5 text-amber-600 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-amber-800",children:"Taksit Faizi Hatırlatması"}),(0,t.jsx)("p",{className:"text-sm text-amber-700 mt-1",children:"Bu hesaplama faiz oranlarını i\xe7ermez. Ger\xe7ek taksit tutarı bankanızın faiz oranlarına g\xf6re değişebilir. Kesin tutarlar i\xe7in bankanızla iletişime ge\xe7iniz."})]})]})})]}),(0,t.jsxs)(G.Es,{className:"gap-2",children:[(0,t.jsx)(n.$,{variant:"outline",onClick:()=>eY(!1),children:"İptal"}),(0,t.jsxs)(n.$,{onClick:sv,disabled:!eP||!eZ||!eV||!eq,className:"min-w-[100px]",children:[(0,t.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Taksit Ekle"]})]})]})}),(0,t.jsx)(G.lG,{open:ex,onOpenChange:eo,children:(0,t.jsxs)(G.Cf,{children:[(0,t.jsxs)(G.c7,{children:[(0,t.jsx)(G.L3,{children:(null==eu?void 0:eu.id)?"Kartı D\xfczenle":"Yeni Kart Ekle"}),(0,t.jsx)(G.rr,{children:(null==eu?void 0:eu.id)?"Kart bilgilerinizi g\xfcncelleyin.":"Yeni bir kredi kartı ekleyin."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 py-4",children:[(0,t.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,t.jsx)(B.J,{htmlFor:"nickname",children:"Kart Takma Adı"}),(0,t.jsx)(U.p,{id:"nickname",placeholder:"\xd6rn: Maaş Kartım",value:(null==eu?void 0:eu.nickname)||"",onChange:e=>eh({...eu,nickname:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.J,{children:"Banka"}),(0,t.jsxs)(F.l6,{value:(null==eu?void 0:eu.bankName)||"",onValueChange:e=>eh({...eu,bankName:e}),children:[(0,t.jsx)(F.bq,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(null==eu?void 0:eu.bankName)&&(0,t.jsx)("img",{src:null===(e=l.h.find(e=>e.name===eu.bankName))||void 0===e?void 0:e.logo,alt:eu.bankName,className:"h-4 w-4 object-contain rounded-sm"}),(0,t.jsx)(F.yv,{placeholder:"Banka se\xe7in..."})]})}),(0,t.jsx)(F.gC,{children:l.h.map(e=>(0,t.jsx)(F.eb,{value:e.name,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("img",{src:e.logo,alt:e.name,className:"h-4 w-4 object-contain rounded-sm"}),(0,t.jsx)("span",{children:e.name})]})},e.name))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.J,{children:"Kredi Limiti (₺)"}),(0,t.jsx)(U.p,{type:"number",placeholder:"5000",value:(null==eu?void 0:eu.creditLimit)||"",onChange:e=>eh({...eu,creditLimit:Number(e.target.value)})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.J,{children:"Son \xd6deme G\xfcn\xfc"}),(0,t.jsx)(U.p,{placeholder:"Ayın 26'sı veya 26",value:(null==eu?void 0:eu.paymentDueDate)||"",onChange:e=>eh({...eu,paymentDueDate:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.J,{children:"Ekstre G\xfcn\xfc"}),(0,t.jsx)(U.p,{placeholder:"Ayın 15'i veya 15",value:(null==eu?void 0:eu.statementDate)||"",onChange:e=>eh({...eu,statementDate:e.target.value})})]})]}),(0,t.jsxs)(G.Es,{children:[(null==eu?void 0:eu.id)&&(0,t.jsx)(n.$,{variant:"destructive",onClick:()=>so(eu.id),children:"Sil"}),(0,t.jsx)(n.$,{variant:"outline",onClick:()=>eo(!1),children:"İptal"}),(0,t.jsx)(n.$,{onClick:()=>sx(eu),children:"Kaydet"})]})]})}),(0,t.jsx)(G.lG,{open:eb,onOpenChange:ek,children:(0,t.jsxs)(G.Cf,{className:"max-w-2xl",children:[(0,t.jsx)(G.c7,{children:(0,t.jsxs)(G.L3,{children:[(null==ey?void 0:ey.nickname)||(null==ey?void 0:ey.bankName)," • Kart Hareketleri"]})}),(0,t.jsxs)("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end p-4 border rounded-lg",children:[(0,t.jsx)("div",{className:"md:col-span-3",children:(0,t.jsx)(B.J,{children:"Yeni Hareket Ekle"})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.J,{children:"Tutar (₺)"}),(0,t.jsx)(U.p,{placeholder:"150,75",inputMode:"decimal",value:eE,onChange:e=>e$(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.J,{children:"A\xe7ıklama"}),(0,t.jsx)(U.p,{placeholder:"Market Alışverişi",value:eH,onChange:e=>eM(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.J,{children:"Tarih"}),(0,t.jsx)(U.p,{type:"date",value:eG,onChange:e=>eU(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.J,{children:"T\xfcr"}),(0,t.jsxs)(F.l6,{value:"harcama",onValueChange:()=>{},children:[(0,t.jsx)(F.bq,{children:(0,t.jsx)(F.yv,{})}),(0,t.jsx)(F.gC,{children:(0,t.jsx)(F.eb,{value:"harcama",children:"Harcama"})})]})]}),(0,t.jsx)("div",{className:"md:col-span-2 flex items-end",children:(0,t.jsx)(n.$,{className:"w-full",onClick:sg,children:"Ekle"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Ge\xe7miş Hareketler"}),(0,t.jsx)("div",{className:"border rounded-md divide-y",children:ey&&(et[ey.id]||[]).length?(et[ey.id]||[]).slice().sort((e,s)=>String(s.date).localeCompare(String(e.date))).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(d.E,{variant:"harcama"===e.type?"secondary":"default",className:(0,O.cn)("font-mono","harcama"===e.type?"bg-red-500/10 text-red-700":"bg-green-500/10 text-green-700"),children:"harcama"===e.type?"-":"+"}),(0,t.jsx)("div",{className:"min-w-0",children:eC===e.id?(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(U.p,{value:eS,onChange:e=>eT(e.target.value),placeholder:"A\xe7ıklama"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(U.p,{value:eD,onChange:e=>ez(e.target.value),placeholder:"Tutar",inputMode:"decimal"}),(0,t.jsx)(n.$,{size:"sm",onClick:async()=>{var s;if(!ey)return;let a=Number(String(eD||"").trim().replace(/\./g,"").replace(",","."));if(!isFinite(a)||a<=0){e9({title:"Ge\xe7ersiz",variant:"destructive"});return}let t=null===(s=et[ey.id])||void 0===s?void 0:s.find(s=>s.id===e.id);if(!t)return;let l=a-t.amount;try{await (0,P.uy)(Y.auth.currentUser.uid,ey.id,{...t,amount:a,description:eS});let s={...ey,currentDebt:(ey.currentDebt||0)+l};await (0,P.upsertCard)(Y.auth.currentUser.uid,s),ew(s),ea(e=>e.map(e=>e.id===s.id?s:e)),el(s=>({...s,[ey.id]:(s[ey.id]||[]).map(s=>s.id===e.id?{...s,amount:a,description:eS}:s)})),eA(null)}catch(e){console.error(e),e9({title:"Hata",description:"G\xfcncellenemedi",variant:"destructive"})}},children:"Kaydet"}),(0,t.jsx)(n.$,{size:"sm",variant:"outline",onClick:()=>eA(null),children:"Vazge\xe7"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"font-medium truncate",children:e.description||"-"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.date})]})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:(0,O.cn)("font-semibold","harcama"===e.type?"text-red-600":"text-green-600"),children:["harcama"===e.type?"-":"+",(0,O.tn)(e.amount)]}),eC!==e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.$,{size:"icon",variant:"ghost",onClick:()=>{eA(e.id),eT(e.description||""),ez(String(e.amount).replace(".",","))},children:(0,t.jsx)(A.A,{className:"h-4 w-4"})}),(0,t.jsx)(n.$,{size:"icon",variant:"ghost",onClick:()=>eL(e.id),children:(0,t.jsx)(H.A,{className:"h-4 w-4"})})]}):null]})]},e.id)):(0,t.jsx)("div",{className:"text-sm text-muted-foreground p-4 text-center",children:"Hen\xfcz kayıt yok."})})]}),ey&&eK&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md bg-muted/30",children:[(0,t.jsx)("span",{className:"text-sm",children:"Bu hareket silinsin mi?"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.$,{size:"sm",variant:"outline",onClick:()=>eL(null),children:"İptal"}),(0,t.jsx)(n.$,{size:"sm",variant:"destructive",onClick:async()=>{let e=null===Y.auth||void 0===Y.auth?void 0:Y.auth.currentUser;if(!e)return;let s=(et[ey.id]||[]).find(e=>e.id===eK);try{await (0,P.rd)(e.uid,ey.id,eK);let a={...ey,currentDebt:(ey.currentDebt||0)-((null==s?void 0:s.amount)||0)};await (0,P.upsertCard)(e.uid,a),ew(a),ea(e=>e.map(e=>e.id===a.id?a:e)),el(e=>({...e,[ey.id]:(e[ey.id]||[]).filter(e=>e.id!==eK)})),eL(null),e9({title:"Hareket silindi"})}catch(e){console.error(e),e9({title:"Hata",description:"Silinemedi",variant:"destructive"})}},children:"Sil"})]})]})]}),(0,t.jsx)(G.Es,{className:"mt-4",children:(0,t.jsx)(n.$,{variant:"outline",onClick:()=>ek(!1),children:"Kapat"})})]})}),eN&&(0,t.jsx)(G.lG,{open:ep,onOpenChange:ej,children:(0,t.jsxs)(G.Cf,{children:[(0,t.jsxs)(G.c7,{children:[(0,t.jsxs)(G.L3,{children:[eN.nickname||eN.bankName," • Hızlı Bor\xe7 \xd6de"]}),(0,t.jsxs)(G.rr,{children:["G\xfcncel borcunuz: ",(0,O.tn)(eN.currentDebt||0)]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 py-4",children:[(0,t.jsx)(n.$,{size:"lg",variant:"outline",className:"h-auto",onClick:()=>sh((0,P.du)(eN.bankName,eN.creditLimit||0,eN.currentDebt||0)),children:(0,t.jsxs)("div",{className:"flex flex-col items-center p-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Asgari Tutarı \xd6de"}),(0,t.jsx)("span",{className:"text-xl font-bold",children:(0,O.tn)((0,P.du)(eN.bankName,eN.creditLimit||0,eN.currentDebt||0))})]})}),(0,t.jsx)(n.$,{size:"lg",className:"h-auto",onClick:()=>sh(eN.currentDebt||0),children:(0,t.jsxs)("div",{className:"flex flex-col items-center p-2",children:[(0,t.jsx)("span",{className:"text-sm text-white/80",children:"T\xfcm Borcu \xd6de"}),(0,t.jsx)("span",{className:"text-xl font-bold",children:(0,O.tn)(eN.currentDebt||0)})]})})]}),(0,t.jsx)(G.Es,{children:(0,t.jsx)(n.$,{variant:"outline",onClick:()=>ej(!1),children:"İptal"})})]})})]})})})}},77007:(e,s,a)=>{"use strict";a.d(s,{Fm:()=>x,Qs:()=>h,XW:()=>o,cj:()=>n,h:()=>m,qp:()=>u});var t=a(86286);a(50654);var l=a(66757),i=a(50161),r=a(18821);function n(e){let{...s}=e;return(0,t.jsx)(l.bL,{"data-slot":"sheet",...s})}function d(e){let{...s}=e;return(0,t.jsx)(l.ZL,{"data-slot":"sheet-portal",...s})}function c(e){let{className:s,...a}=e;return(0,t.jsx)(l.hJ,{"data-slot":"sheet-overlay",className:(0,r.cn)("fixed inset-0 z-50 bg-black/50",s),...a})}function m(e){let{className:s,children:a,side:n="right",...m}=e;return(0,t.jsxs)(d,{children:[(0,t.jsx)(c,{}),(0,t.jsxs)(l.UC,{"data-slot":"sheet-content",className:(0,r.cn)("bg-background fixed z-50 flex flex-col gap-4 shadow-lg","right"===n&&"inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===n&&"inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===n&&"inset-x-0 top-0 h-auto border-b","bottom"===n&&"inset-x-0 bottom-0 h-auto border-t",s),...m,children:[a,(0,t.jsxs)(l.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,t.jsx)(i.A,{className:"size-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function x(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"sheet-header",className:(0,r.cn)("flex flex-col gap-1.5 p-4",s),...a})}function o(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"sheet-footer",className:(0,r.cn)("mt-auto flex flex-col gap-2 p-4",s),...a})}function u(e){let{className:s,...a}=e;return(0,t.jsx)(l.hE,{"data-slot":"sheet-title",className:(0,r.cn)("text-foreground font-semibold",s),...a})}function h(e){let{className:s,...a}=e;return(0,t.jsx)(l.VY,{"data-slot":"sheet-description",className:(0,r.cn)("text-muted-foreground text-sm",s),...a})}}},e=>{var s=s=>e(e.s=s);e.O(0,[8609,9696,1760,6788,6108,9176,5438,5947,6739,8170,3957,8360,5722,8637,7358],()=>s(37843)),_N_E=e.O()}]);